<div data-ng-search-form=""
     data-runSearch="true">

  <div class="row gn-row-topics" data-ng-show="searchInfo.count > 0">
    <div class="container">
      <div class="col-sm-12 col-md-12" data-ng-show="browse !== ''">

        <div id="gn-row-topics-collapse" class="gn-row-topics-collapse" data-ng-class="{'gn-filter-show': doShow === 'showFilter' || doShow === undefined, 'gn-filter-hide': doShow === 'hideFilter'}">
          <div class="gn-row-topics-header clearfix">

            <div class="clearfix pull-left search-show-only">
              <button type="button"
                      class="btn btn-link btn-help" 
                      data-container="body" 
                      data-toggle="popover" 
                      data-placement="right"
                      data-html="true"
                      title="{{ 'searchShowOnlyTooltip-title' | translate }}"
                      data-content="{{ 'searchShowOnlyTooltip-desc' | translate }}<br>{{ 'searchShowOnlyTooltip-link' | translate }}">
                <span class="icon-help"></span>
              </button>
              <span class="filter-label" data-translate="">searchShowOnly</span>
            </div>
            <ul class="type-filter-list pull-left">
              <li>
                <a href="" data-ng-click="toggleExclusiveFilter('type', ['dataset', 'series'])"
                    data-ng-class="{'active': (searchObj.params.type.indexOf('dataset') > -1)}">
                  <span class="icon-buffer"></span><span data-translate="">showDatasets</span></a>
              </li>
              <li>
                <a href="" data-ng-click="toggleExclusiveFilter('map', 'true')"
                    data-ng-class="{'active': (searchObj.params.dynamic == 'true')}">
                  <span class="icon-map"></span><span data-translate="">mapServices</span></a>
              </li>
              <li>
                <a href="" data-ng-click="toggleExclusiveFilter('download', 'true')"
                    data-ng-class="{'active': (searchObj.params.download == 'true')}"><span class="download-icn-cont">
                  <span class="icon-down-fat"></span></span><span data-translate="">downloadableResources</span></a>
              </li>
              <li><a href="" data-ng-click="toggleExclusiveFilter('favorites')"
                      data-ng-class="{'active': (searchObj.params._id != '')&&(searchObj.params._id != undefined)}">
                  <span class="icon-star"></span>favoriter</a>
              </li>
              <li>
                  <span>|</span>
              </li>
              <li>
                <a href="" data-ng-click="viewAllMetadata()">
                  <span class="home fa fa-home"></span> <!-- Not able to use icon-home like other class icon-star, icon-map, icon-buffer so using fa fa-home. Seem fontello doesn't contain home icon -->
                  <span data-translate="">viewAllResources</span>
                </a>
              </li>
            </ul>
            <div class="pull-right">
              <a
                title="{{'advanced' | translate}}"
                data-ng-model="searchObj.advancedMode"
                btn-checkbox=""
                btn-checkbox-true="1"
                btn-checkbox-false="0">
                <span class="show-advanced" data-ng-hide="searchObj.advancedMode" data-translate="">viewAdvance</span>
                <span class="hide-advanced" data-ng-show="searchObj.advancedMode" data-translate="">hideAdvance</span>
              </a>

              <button type="button"
                      class="btn btn-link btn-help" 
                      data-container="body" 
                      data-toggle="popover" 
                      data-placement="left"
                      data-html="true"
                      title="{{ 'advancedSearchTooltip-title' | translate }}"
                      data-content="{{ 'advancedSearchTooltip-desc' | translate }}<br>{{ 'advancedSearchTooltip-link' | translate }}">
                <span class="icon-help"></span>
              </button>
            </div>
          </div>
          <div class="row" data-ng-hide="searchObj.advancedMode">
            <span data-ng-repeat="(key, facet) in searchInfo.facet['topicCats']"
                  data-ng-show="browse === 'topics'"
                  class="col-xs-12 col-sm-6 col-md-4 col-lg-3 chips-card">
              <div class="badge-result badge-result-topic clearfix">
                <a class="pull-left clearfix"
                  title="{{facet['@label']}}"
                  role="link"
                  data-ng-href="#/search?facet.q=topicCat%2F{{facet['@name']}}">
                    <span class="gn-icon-label">{{facet['@label']}}</span>
                </a>
              </div>
            </span>
            <span data-ng-repeat="(key, facet) in searchInfo.facet['inspireThemesURI'] track by $index"
                  data-ng-show="browse === 'inspire'"
                  class="col-xs-12 col-sm-6 col-md-4 col-lg-3 chips-card">
              <div class="badge-result badge-result-inspire clearfix">
                <a class="pull-left clearfix bg-iti-{{facet['@name'].slice(facet['@name'].lastIndexOf('/')+1)}}"
                  title="{{facet['@label']}}"
                  data-ng-href="#/search?facet.q=inspireThemeURI%2F{{facet['@name'] | encodeURIComponent | encodeURIComponent}}">
                  <span class="badge-icon pull-left">
                    <i class="fa fa-3x gn-icon iti-{{facet['@name'].slice(facet['@name'].lastIndexOf('/')+1)}}"></i>
                  </span>
                  <span class="badge-text pull-left">
                    <span class="gn-icon-label">{{facet['@label']}}</span>
                  </span>
                </a>
                <span class="badge pull-left">{{facet['@count']}}</span>
              </div>
            </span>
          </div>

          <div class="row" data-ng-show="searchObj.advancedMode">
            <!--Advanced search form-->
            <div data-ng-include="advancedSearchTemplate"></div>
          </div>
        </div>
        <div class="gn-row-topics-footer clearfix">
          <div class="col-md-2 text-left gn-nopadding-left">
            <span class="result-text" data-ng-show="searchResults.count >= 0"><span data-translate="">shows</span> <b>{{searchResults.count}}</b> <span data-translate="">results</span></span>
          </div>
          <div class="col-md-8 text-center">
            <ul class="selected-filter-list">
              <li data-ng-show="searchObj.params.resourceDateFrom">
                <a href="" data-ng-click="unselectResourceDateFrom()">
                  <span>fr√•n datum {{searchObj.params.resourceDateFrom | date : 'yyyy-MM-dd'}}</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="searchObj.params.resourceDateTo != undefined">
                <a href="" data-ng-click="unselectResourceDateTo()">
                  <span>till datum {{searchObj.params.resourceDateTo | date : 'yyyy-MM-dd'}}</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="searchObj.params.type.indexOf('dataset') > -1">
                <a href="" data-ng-click="toggleExclusiveFilter('type', '')">
                  <span data-translate="">showDatasets</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="searchObj.params.dynamic == 'true'">
                <a href="" data-ng-click="toggleExclusiveFilter('map', '')">
                  <span data-translate="">mapServices</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="searchObj.params.download == 'true'">
                <a href="" data-ng-click="toggleExclusiveFilter('download', '')">
                  <span data-translate="">downloadableResources</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="(searchObj.params._id != '') && (searchObj.params._id != undefined)">
                <a href="" data-ng-click="toggleExclusiveFilter('favorites', '')">
                  <span data-translate="">favourites</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-show="(searchObj.params.geometry != '') && (searchObj.params.geometry != undefined)">
                <a href="" data-ng-click="unselectGeoResources()">
                  <span data-translate="">geographical</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
              <li data-ng-repeat="topic in selectedTopicCategories | orderBy: translatedTopicCat">
                <a href="" data-ng-click="unselectTopicCategory(topic)">
                  <span data-translate="">{{topic}}</span>
                  <span class="icon-cancel"></span>
                </a>
              </li>
        
            </ul>
          </div>
          <div class="col-md-2 text-right gn-nopadding-right" data-ng-class="{'gn-filter-show': doShow === 'showFilter' || doShow === undefined, 'gn-filter-hide': doShow === 'hideFilter'}">
            <a data-ng-click="toggleFilterPanel('showFilter')"
               data-ng-model="doShow"
               class="gn-filter-toggle-show">
              <span class="show-filtering" data-translate="">showFiltering</span>
              <span class="icon-down-dir"></span>
            </a>
            <a data-ng-click="toggleFilterPanel('hideFilter')"
               data-ng-model="doShow"
               class="gn-filter-toggle-hide">
              <span class="hide-filtering" data-translate="">hideFiltering</span>
              <span class="icon-up-dir"></span>
            </a>
          </div>
          
        </div>

      </div>
    </div>
  </div>

  <div data-ng-include="'../../catalog/views/sweden/templates/searchForm.html'"></div>

  <div gn-grid-related-query="searchResults.records"></div>
  <div class="row gn-row-results">
    <div class="container">
      <div class="col-md-12 container-fluid">
        <div class="row" data-ng-show="isFilterTagsDisplayedInSearch">
          <div class="col-xs-12">
            <div data-search-filter-tags="">

            </div>
          </div>
        </div>
        <div class="row gn-row-tools">
          <div class="col-xs-12 col-md-12"
               data-gn-facet-dimension-list="searchResults.dimension"
               data-params="searchObj.params"
               data-facet-type="facetsSummaryType"
               data-facet-list="facetConfig"
               data-current-facets="currentFacets"
               data-tab-field="facetTabField"></div>

          <div class="col-md-9 col-sm-9 clearfix" data-ng-show="searchResults.records.length > 0">
            <button type="button"
                    class="btn btn-link btn-help pull-left" 
                    data-container="body" 
                    data-toggle="popover" 
                    data-placement="right"
                    data-html="true"
                    title="{{ 'searchResultTooltip-title' | translate }}"
                    data-content="{{ 'searchResultTooltip-desc' | translate }}<br>{{ 'searchResultTooltip-link' | translate }}">
              <span class="icon-help"></span>
            </button>
            <div class="pull-left"
                 data-sortby-combo=""
                 data-params="searchObj.params"
                 data-gn-sortby-values="searchObj.sortbyValues"></div>
            <div class="pull-left"
                data-gn-pagination="paginationInfo"
                data-hits-values="searchObj.hitsperpageValues"
                data-enable-hot-keys=""
                data-enable-events=""></div>
          </div>

          <div class="col-md-3 col-sm-3"
               data-ng-show="searchResults.records.length > 0">
            <div class="pull-right"
                 data-gn-results-tpl-switcher=""></div>
          </div>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <span class="loading fa fa-spinner fa-spin"
                data-ng-show="searching"></span>

          <div class="alert alert-warning" role="alert"
               ng-if="!searching && searchResults.count == 0">
            <i class="fa fa-frown-o"></i>
            <span data-translate="">zarooResult</span>
          </div>

          <div data-ng-show="searchResults.records.length > 0"
              data-gn-results-container=""
              data-search-results="searchResults"
              data-template-url="resultTemplate"
              data-map="searchObj.searchMap"></div>
        </div>
      </div>

      <div class="row gn-row-tools">
        <div class="col-xs-12"
             data-ng-show="searchResults.records.length > 0">
          <div class=""
                data-gn-pagination="paginationInfo"
                data-hits-values="searchObj.hitsperpageValues"
                data-enable-hot-keys=""
                data-enable-events=""></div>
        </div>
      </div>

    </div>
  </div>

  <div data-gn-map-field="searchObj.searchMap"
       data-gn-map-field-geom="searchObj.params.geometry"
       data-gn-map-field-opt="searchObj.mapfieldOption"
       class="gn-search-map hidden-xs">
  </div>

  <button data-ng-click="toggleMap()"
          title="{{'toggleMiniMap' | translate}}"
          class="gn-toggle gn-minimap-toggle btn btn-primary gn-minimap-button hidden-xs">
    <i class="fa fa-angle-double-right" ></i>
    <b class="gn-minimap-toggle gn-minimap-text" data-translate="">map</b>
  </button>
</div>
