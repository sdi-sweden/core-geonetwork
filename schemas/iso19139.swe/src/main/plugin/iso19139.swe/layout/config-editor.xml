<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the
  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)
  ~ and United Nations Environment Programme (UNEP)
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or (at
  ~ your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but
  ~ WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
  ~
  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,
  ~ Rome - Italy. email: geonetwork@osgeo.org
  -->

<editor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../config-editor.xsd"
        xmlns:gn="http://www.fao.org/geonetwork"
        xmlns:gco="http://www.isotc211.org/2005/gco"
        xmlns:gmd="http://www.isotc211.org/2005/gmd"
        xmlns:gmx="http://www.isotc211.org/2005/gmx"
        xmlns:srv="http://www.isotc211.org/2005/srv"
        xmlns:gml="http://www.opengis.net/gml"
        xmlns:xlink="http://www.w3.org/1999/xlink">

  <!-- Form field type configuration. Default is text. -->
  <fields>
    <for name="gmd:abstract" use="textarea"/>
    <for name="gmd:checkPointDescription" use="textarea"/>
    <for name="gmd:credit" use="textarea"/>
    <for name="gmd:description" use="textarea"/>
    <for name="gmd:evaluationMethodDescription" use="textarea"/>
    <for name="gmd:explanation" use="textarea"/>
    <for name="gmd:handlingDescription" use="textarea"/>
    <for name="gmd:maintenanceNote" use="textarea"/>
    <for name="gmd:measureDescription" use="textarea"/>
    <for name="gmd:purpose" use="textarea"/>
    <for name="gmd:orderingInstructions" use="textarea"/>
    <for name="gmd:otherConstraints" use="textarea"/>
    <for name="gmd:statement" use="textarea"/>
    <for name="gmd:supplementalInformation" use="textarea"/>
    <for name="gmd:specificUsage" use="textarea"/>
    <for name="gmd:userNote" use="textarea"/>
    <for name="gmd:useLimitation" use="textarea"/>


    <for name="gco:Distance" use="number"/>
    <for name="gco:Decimal" use="number"/>
    <for name="gco:Integer" use="number"/>
    <for name="gco:Real" use="number"/>
    <for name="gco:Boolean" use="checkbox"/>


    <for name="gco:Date" use="data-gn-date-picker"/>
    <for name="gco:DateTime" use="data-gn-date-picker"/>



    <!-- gmx:FileName/@src attribute -->
    <for name="src" use="data-gn-logo-selector"/>

    <for name="gmd:electronicMailAddress" use="email"/>

    <!--<for name="gmd:language" use="data-gn-language-picker"/>
    <for name="gmd:languageCode" use="data-gn-language-picker"/>-->

    <for name="gmd:country" use="data-gn-country-picker"/>

    <for name="gmd:referenceSystemInfo" addDirective="data-gn-crs-selector"/>


    <for name="gmd:contact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:pointOfContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:distributorContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:processor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:citedResponsibleParty" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-search-action="true"
              ddata-popup-action="true"
              ata-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>


    <!-- Example configuration: Add onLine source from subtemplate
    <for name="gmd:onLine" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-template-type="onLine"
              data-filter='{"_root": "gmd:CI_OnlineResource"}'/>
    </for>
    -->
    <for name="gmd:descriptiveKeywords" addDirective="data-gn-thesaurus-selector">
      <!--
      Example of configuration to disable free text keywords in the thesaurus selector
      <directiveAttributes data-allow-free-text-keywords="false" />

      To restrict the list of thesaurus allowed, set the include attribute
      for the directive:
      <directiveAttributes data-include="external.theme.inspire-theme,external.place.regions"/>

      Exclude a thesaurus:
      <directiveAttributes data-include="-external.place.regions"/>

      Exclude all thesaurus already used in the metadata:
      -->
      <directiveAttributes data-include="xpath::string-join(gmd:MD_Metadata/gmd:identificationInfo
                                          //gmd:thesaurusName/*/gmd:identifier/*/
                                            gmd:code/gmx:Anchor/
                                              concat('-', substring-after(text()[. != ''], 'geonetwork.thesaurus.')), ',')"/>
    </for>
  </fields>


  <fieldsWithFieldset>
    <name>gmd:MD_Metadata</name>
    <name>gmd:identificationInfo</name>
    <name>gmd:distributionInfo</name>
    <name>gmd:portrayalCatalogueInfo</name>
    <name>gmd:portrayalCatalogueCitation</name>
    <name>gmd:thesaurusName</name>
    <name>gmd:resourceConstraints</name>
    <name>gmd:spatialRepresentationInfo</name>
    <name>gmd:pointOfContact</name>
    <name>gmd:contact</name>
    <name>gmd:graphicOverview</name>
    <name>gmd:citedResponsibleParty</name>
    <name>gmd:dataQualityInfo</name>
    <name>gmd:contentInfo</name>
    <name>gmd:distributionFormat</name>
    <name>gmd:referenceSystemInfo</name>
    <name>gmd:spatialResolution</name>
    <name>gmd:offLine</name>
    <name>gmd:onLine</name>
    <name>gmd:address</name>
    <name>gmd:projection</name>
    <name>gmd:ellipsoid</name>
    <name>gmd:attributes</name>
    <name>gmd:verticalCRS</name>
    <name>gmd:geographicBox</name>
    <name>gmd:EX_TemporalExtent</name>
    <name>gmd:MD_Distributor</name>
    <name>srv:containsOperations</name>
    <name>srv:SV_CoupledResource</name>
    <name>gmd:metadataConstraints</name>
    <name>gmd:aggregationInfo</name>
    <name>gmd:processStep</name>
    <name>gmd:lineage</name>
    <name>gmd:centerPoint</name>
    <name>gml:verticalCS</name>
    <name>gml:verticalDatum</name>
    <name>gmd:identifier</name>
    <name>gmd:verticalElement</name>
    <!--<name>gmd:topicCategory</name>-->
  </fieldsWithFieldset>

  <multilingualFields>
    <!-- In multilingual mode, define which mode
    the widget should have. If expanded, then one
    field per language is displayed. -->
    <expanded>
      <name>gmd:title</name>
      <name>gmd:abstract</name>
    </expanded>
    <!-- All fields in ISO could be multilingual.
    Define element to exclude.

      The name element can optionally have ancestor, child or parent attributes to
      further restrict the exclusion.  For example if some gmd:code elements are
      multilingual but others are not then adding a parent/child/parent attribute
      can restrict the exclude to only some elements.

      For example:
        <name ancestor="gmd:thesaurusName">gmd:code</name>
        or
        <name child="gmx:Anchor">gmd:code</name>
    -->
    <exclude>
      <name>gmd:identifier</name>
      <name>gmd:metadataStandardName</name>
      <name>gmd:metadataStandardVersion</name>
      <name>gmd:hierarchyLevelName</name>
      <name>gmd:dataSetURI</name>
      <name>gmd:postalCode</name>
      <name>gmd:city</name>
      <name>gmd:language</name>
      <name>gmd:administrativeArea</name>
      <name>gmd:voice</name>
      <name>gmd:facsimile</name>
      <name>gmd:dataset</name>
      <name>gmd:other</name>
      <name>gmd:hoursOfService</name>
      <name>gmd:applicationProfile</name>
      <name>gmd:page</name>
      <name>gmd:date</name>
      <name>gmd:linkage</name>
      <name>gmd:fileName</name>
      <name>gmd:protocol</name>
      <name>gmd:fileType</name>
      <name>gmd:unitsOfDistribution</name>
      <name>gmd:amendmentNumber</name>
      <name>gmd:specification</name>
      <name>gmd:fileDecompressionTechnique</name>
      <name>gmd:turnaround</name>
      <name>gmd:fees</name>
      <name>gmd:userDeterminedLimitations</name>
      <name>gmd:codeSpace</name>
      <name>gmd:version</name>
      <name>gmd:edition</name>
      <name>gmd:ISBN</name>
      <name>gmd:ISSN</name>
      <name>gmd:errorStatistic</name>
      <name>gmd:schemaAscii</name>
      <name>gmd:softwareDevelopmentFileFormat</name>
      <name>gmd:shortName</name>
      <name>gmd:condition</name>
      <name>gmd:maximumOccurence</name>
      <name>gmd:domainValue</name>
      <name>gmd:densityUnits</name>
      <name>gmd:descriptor</name>
      <name>gmd:denominator</name>
      <name>gmd:classificationSystem</name>
      <name>gmd:checkPointDescription</name>
      <name>gmd:transformationDimensionDescription</name>
      <name>gmd:orientationParameterDescription</name>
      <name>gmd:distance</name>
      <name>srv:name</name>
      <name>srv:invocationName</name>
      <name>srv:serviceTypeVersion</name>
      <name>srv:operationName</name>
      <name>srv:identifier</name>
    </exclude>
  </multilingualFields>


  <!-- View configuration -->
  <views>

    <!-- Only mandatory Not admin-elements -->
    <view name="swedish-a" disabled="true" upAndDownControlHidden="true">
      <tab id="swedish-a" default="true" mode="flat">
        <section name="metadata2">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <field xpath="/gmd:MD_Metadata/gmd:language" or="language"
                 in="/gmd:MD_Metadata"/>

          <field name="metadataPointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:contact" />

          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
        </section>

        <section name="identificationInfo2">
          <!-- Title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"
            or="title"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation" />

          <!--Alternative title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:alternateTitle"
            or="alternateTitle"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
            del="."/>


          <!-- Dates -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date" />

          <action type="add" name="referenceDateAdd" or="date"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date) = 0">
            <template>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>
                      <gco:Date></gco:Date>
                    </gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </action>

          <!-- Resource identifier for dataset, service
           and add action to compute it if not defined. -->
          <field name="identifier" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <field name="identifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <action type="add" name="identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>


          <!-- Abstract -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract" />

          <!-- Status -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status" />


          <!-- Keywords -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword[not(../gmd:thesaurusName)]"
            or="keyword"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[not(gmd:thesaurusName)]"/>

          <!-- INSPIRE Themes -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'INSPIRE themes')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  btnLabel="addInspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'INSPIRE themes')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET - INSPIRE themes, version 1.0</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">geonetwork.thesaurus.external.theme.inspire-theme</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Initiativ -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'Initiativ')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'Initiativ')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Initiativ</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2011-04-04</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/swe/thesaurus.download?ref=external.theme.Initiativ">geonetwork.thesaurus.external.theme.Initiativ</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Topic Category -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory" />

          <action type="add"
                  if="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory) = 0"
                  name="topicCategory" or="topicCategory"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:topicCategory>
                  <gmd:MD_TopicCategoryCode></gmd:MD_TopicCategoryCode>
                </gmd:topicCategory>
              </snippet>
            </template>
          </action>

          <!-- Character set -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:characterSet" />

          <!-- Point of contact -->
          <field name="pointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"
                 if=""/>

          <!-- Thumbnails -->
          <field name="graphicOverview"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview" />
        </section>

        <section name="extent">
          <!-- Extent description - dataset -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent description - service -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent - dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Extent - service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - dataset -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - dataset -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - services -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - service -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="verticalElementSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:verticalElement"
                 del="../..">
            <template>
              <values>
                <key label="vertical_crs_minimum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:minimumValue/gco:Real"
                     tooltip="gmd:minimumValue"
                     use="number"/>

                <key label="vertical_crs_maximum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:maximumValue/gco:Real"
                     tooltip="gmd:maximumValue"
                     use="number"/>

                <key label="vertical_crs_datum"
                     xpath="gmd:EX_VerticalExtent/gmd:verticalCRS/@xlink:title"
                     tooltip="gmd:verticalCRS">>
                  <helper name="gmd:verticalCRS" />
                </key>
              </values>
              <snippet>
                <gmd:verticalElement>
                  <gmd:EX_VerticalExtent>
                    <gmd:minimumValue>
                      <gco:Real>{{vertical_crs_minimum_value}}</gco:Real>
                    </gmd:minimumValue>
                    <gmd:maximumValue>
                      <gco:Real>{{vertical_crs_maximum_value}}</gco:Real>
                    </gmd:maximumValue>
                    <gmd:verticalCRS xlink:title="{{vertical_crs_datum}}"/>
                  </gmd:EX_VerticalExtent>
                </gmd:verticalElement>
              </snippet>
            </template>
          </field>

        </section>

        <section name="restrictions">
          <!-- Dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

        </section>

        <!--<section name="restrictions">
          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="accessConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>


          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                <gmd:accessConstraints>
                  <gmd:MD_RestrictionCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                          codeListValue="otherRestrictions"/>
                </gmd:accessConstraints>
              </snippet>
            </template>
          </action>



          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

        </section>-->

        <section name="metadataMaintenance2">

          <field name="resourceMaintanceSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceMaintenance"
                 del=".">
            <template>
              <values>
                <key label="maintenance_note"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceNote/gco:CharacterString"
                     use="textarea"
                     tooltip="gmd:maintenanceNote"/>

                <key label="maintenance_frequency"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceAndUpdateFrequency/gmd:MD_MaintenanceFrequencyCode/@codeListValue"
                     tooltip="gmd:maintenanceAndUpdateFrequency">
                  <codelist name="gmd:MD_MaintenanceFrequencyCode"/>
                </key>
              </values>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue="{{maintenance_frequency}}"/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString>{{maintenance_note}}</gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </field>

          <!-- Datasets -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

        </section>

        <section name="service" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"
            or="serviceType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />


          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
            or="operatesOn"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />

        </section>


        <section name="dataset" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">


          <field
            name="spatialRepresentationType"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType"
            or="spatialRepresentationType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />


          <section name="scales" tooltip="gmd:spatialResolution">
            <field
              name="equivalentScale"
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />
          </section>


          <!-- Resource language -->
          <field
            name="language"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:language"
            or="language"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />
          <action type="add" name="language" or="language"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:language>
                  <gmd:LanguageCode codeList="http://www.loc.gov/standards/iso639-2/" codeListValue=""/>
                </gmd:language>
              </snippet>
            </template>
          </action>
        </section>

        <section name="dataQualityInfo2">
          <field
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>

          <field name="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <field name="conformity" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                    gmd:report/gmd:DQ_DomainConsistency/gmd:result"
                 del="../..">
            <template>
              <values>
                <key label="conformity_title"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString"
                     tooltip="gmd:pass">
                  <helper name="gmd:title" context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_date"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"
                     tooltip="gmd:date"
                     use="date"/>
                <key label="explanation"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:explanation/gco:CharacterString"
                     tooltip="gmd:explanation|gmd:DQ_ConformanceResult"
                     use="textarea"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>{{conformity_title}}</gco:CharacterString>
                          <gn:copy select="gmd:PT_FreeText"/>
                        </gmd:title>
                        <gn:copy select="gmd:alternateTitle"/>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>{{conformity_date}}</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gn:copy select="gmd:edition"/>
                        <gn:copy select="gmd:editionDate"/>
                        <gn:copy select="gmd:identifier"/>
                        <gn:copy select="gmd:citedResponsibleParty"/>
                        <gn:copy select="gmd:presentationForm"/>
                        <gn:copy select="gmd:series"/>
                        <gn:copy select="gmd:otherCitationDetails"/>
                        <gn:copy select="gmd:collectiveTitle"/>
                        <gn:copy select="gmd:ISBN"/>
                        <gn:copy select="gmd:ISSN"/>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>


          <action type="add" name="conformity" or="report" tooltip="gmd:result"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString/>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date/>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString/>
                        </gmd:explanation>
                        <gmd:pass gco:nilReason="unknown">
                          <gco:Boolean/>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


        </section>

        <section name="referenceSystemInfo2" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
          <field name="rsIdentifier"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../.." />

          <action type="add" name="referenceSystemInfo2" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata"
                  if="count(gmd:MD_Metadata/gmd:referenceSystemInfo) = 0">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString></gco:CharacterString>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>

          <!--<field name="rsIdentifier" templateModeOnly="false"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>

              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gn:copy select="gmd:version"/>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>-->


          <!--<action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>-->
        </section>

        <section name="resources">
          <section xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor" or="distributor"
                   in="/gmd:MD_Metadata"/>

          <action type="add" name="add-distributor" btnLabel="add-distributor"
                  or="distributor" in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributor>
                  <gmd:MD_Distributor>
                    <gmd:distributorContact></gmd:distributorContact>
                    <gmd:distributorFormat></gmd:distributorFormat>
                    <gmd:distributorTransferOptions>
                      <gmd:MD_DigitalTransferOptions>
                        <gmd:onLine></gmd:onLine>
                      </gmd:MD_DigitalTransferOptions>
                    </gmd:distributorTransferOptions>
                  </gmd:MD_Distributor>
                </gmd:distributor>
              </snippet>
            </template>
          </action>
        </section>

        <section name="inspire_sds"  displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
          <!-- CONFORMITY CLASS 1 -->
          <section name="inspire_sds_cc1">

            <!-- 4.4.1 TG4 : ensure gmd:DQ_DataQuality for service exists -->
            <action type="process"
                    process="sds-add-dataquality"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])=0"/>

            <!-- 4.4.1 rec 1 : replace CharacterString with Anchor-->
            <action type="process"
                    process="sds-fix-category"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)>0"/>

            <!-- 4.4.1 category -->
            <field name="sds-category"
                   xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>

            <!-- 4.4.1 pass -->
            <field
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:pass"/>

            <action type="add"
                    name="inspire_add_pass"
                    forceLabel="true"
                    or="pass"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult">
              <template>
                <snippet>
                  <gmd:pass>
                    <gco:Boolean>true</gco:Boolean>
                  </gmd:pass>
                </snippet>
              </template>
            </action>


            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** accessPoint *** -->

            <field name="sds-accesspoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'accessPoint']"

                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-accesspoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://accesspoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>

            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** endPoint *** -->

            <field name="sds-endpoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'endPoint']"
                   notDisplayedIfMissing="true"
                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-endpoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://endpoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>


            <!-- 4.4.3 TG8: edit Technical specification -->

            <field
              templateModeOnly="true"
              notDisplayedIfMissing="true"
              forceLabel="true"
              name="sds-tech-spec"
              del="../.."
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_FormatConsistency/gmd:result">
              <template>
                <values>
                  <key label="conformity_linkage"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                  <key label="conformity_desc"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                       tooltip="gmd:pass">
                    <helper name="gmd:title"
                            context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_FormatConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                  </key>
                  <key label="conformity_date" use="gn-date-picker"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"/>
                  <key label="explanation" use="text"
                       xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                </values>
                <snippet>
                  <gmd:result>
                    <gmd:DQ_ConformanceResult>
                      <gmd:specification>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                            </gmx:Anchor>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                <gco:Date>{{conformity_date}}</gco:Date>
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode
                                  codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                  codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:specification>
                      <gmd:explanation>
                        <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      </gmd:explanation>
                      <gmd:pass>
                        <gco:Boolean>true</gco:Boolean>
                      </gmd:pass>
                    </gmd:DQ_ConformanceResult>
                  </gmd:result>
                </snippet>
              </template>
            </field>

            <!-- 4.4.3 TG8: add Technical specification entry -->

            <action type="add"
                    name="sds-add-tech-spec"
                    forceLabel="true"
                    or="report"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

              <template>
                <snippet>
                  <gmd:report>
                    <gmd:DQ_FormatConsistency>
                      <gmd:result>
                        <gmd:DQ_ConformanceResult>
                          <gmd:specification>
                            <gmd:CI_Citation>
                              <gmd:title>
                                <gmx:Anchor xlink:href=" http://link,to/the.technical.specification">
                                  Description of technical specification
                                </gmx:Anchor>
                              </gmd:title>
                              <gmd:date>
                                <gmd:CI_Date>
                                  <gmd:date>
                                    <gco:Date>2014-12-11</gco:Date>
                                  </gmd:date>
                                  <gmd:dateType>
                                    <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                                  </gmd:dateType>
                                </gmd:CI_Date>
                              </gmd:date>
                            </gmd:CI_Citation>
                          </gmd:specification>
                          <gmd:explanation>
                            <gco:CharacterString>Conformant to the cited specifications.
                            </gco:CharacterString>
                          </gmd:explanation>
                          <gmd:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </gmd:pass>
                        </gmd:DQ_ConformanceResult>
                      </gmd:result>
                    </gmd:DQ_FormatConsistency>
                  </gmd:report>
                </snippet>
              </template>
            </action>

          </section>

          <!-- CONFORMITY CLASS 2 -->
          <section name="inspire_sds_cc2">

            <section name="sds-section-crs">
              <field
                xpath="gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier/gmd:code/gmx:Anchor"
                del="."/>
              <!-- The useXmlSnippet="true" attribute is a workaround to keep backward compatibility since often
              the data-gn-crs-selector directive is used specifying a snippet as below although the developer wanted
              to use the hardcoded snipped in EditorXMLService.js. We need a way to specify if we really want
              to use the snippet below. The attribute is used in the template render-element-template-field located in form-builder.xsl-->
              <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                      useXmlSnippet="true"
                      or="referenceSystemInfo" in="/gmd:MD_Metadata">
                <template>
                  <snippet>
                    <gmd:referenceSystemInfo>
                      <gmd:MD_ReferenceSystem>
                        <gmd:referenceSystemIdentifier>
                          <gmd:RS_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href='http://www.opengis.net/def/crs/EPSG/0/{{code}}'
                                          xlink:title='{{description}}'>{{code}}
                              </gmx:Anchor>
                            </gmd:code>
                          </gmd:RS_Identifier>
                        </gmd:referenceSystemIdentifier>
                      </gmd:MD_ReferenceSystem>
                    </gmd:referenceSystemInfo>
                  </snippet>
                </template>
              </action>
            </section>

            <!-- 4.5.2 Ensure gmd:DQ_ConceptualConsistency mandatory elements for quality of service exists -->

            <section name="sds-section-qos">

              <action type="process"
                      process="sds-add-qualityofservice"
                      if="(count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])>0 and
                              (count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='availability'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='performance'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='capacity'])=0 ))"/>

              <field
                xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency"/>

            </section>

            <!-- 4.5.3 TG13 Conditions applying to access and use -->

            <section name="accessConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- accessConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- accessConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- accessConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- access constraints -->

            <section name="useConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- useConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- useConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>

                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- useConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- use constraints -->

            <!-- It's managed in identification info section -->
            <!--<section name="sds-section-custodian">

              <field name="pointOfContact"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue='custodian']"
              />


            </section>-->

          </section>

          <!-- CONFORMITY CLASS 3 -->

          <section name="inspire_sds_cc3">

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"/>

            <action type="add"
                    forceLabel="true"
                    name="sds-addOperation"
                    or="containsOperations"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
              <template>
                <snippet>
                  <srv:containsOperations>
                    <srv:SV_OperationMetadata>
                      <srv:operationName>
                        <gco:CharacterString></gco:CharacterString>
                      </srv:operationName>
                      <srv:DCP>
                        <srv:DCPList
                          codeList="http://inspire.ec.europa.eu/metadata-codelist/DCPList"
                          codeListValue="webServices">Web services
                        </srv:DCPList>
                      </srv:DCP>
                      <srv:connectPoint>
                        <gmd:CI_OnlineResource>
                          <gmd:linkage>
                            <gmd:URL>http://</gmd:URL>
                          </gmd:linkage>
                        </gmd:CI_OnlineResource>
                      </srv:connectPoint>
                    </srv:SV_OperationMetadata>
                  </srv:containsOperations>
                </snippet>
              </template>
            </action>

          </section>

        </section>
      </tab>

      <thesaurusList>
        <thesaurus key="external.theme.Initiativ"
                   widgetMode="checkboxes" />
      </thesaurusList>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="srv:containsOperations"/>
        <for name="srv:SV_OperationMetadata"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>
    </view>

    <!-- Only mandatory with admin-elements -->
    <view name="swedish-b" disabled="true" upAndDownControlHidden="true">
      <tab id="swedish-b" default="true" mode="flat">
        <section name="metadata2">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <field xpath="/gmd:MD_Metadata/gmd:language" or="language"
                 in="/gmd:MD_Metadata"/>

          <field name="metadataPointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:contact" />

          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
        </section>

        <section name="identificationInfo2">
          <!-- Title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"
            or="title"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation" />

          <!--Alternative title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:alternateTitle"
            or="alternateTitle"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
            del="."/>


          <!-- Dates -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date" />

          <action type="add" name="referenceDateAdd" or="date"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date) = 0">
            <template>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>
                      <gco:Date></gco:Date>
                    </gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </action>

          <!-- Resource identifier for dataset, service
           and add action to compute it if not defined. -->
          <field name="identifier" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <field name="identifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <action type="add" name="identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>


          <!-- Abstract -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract" />

          <!-- Status -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status" />


          <!-- Keywords -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword[not(../gmd:thesaurusName)]"
            or="keyword"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[not(gmd:thesaurusName)]"/>

          <!-- INSPIRE Themes -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'INSPIRE themes')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  btnLabel="addInspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'INSPIRE themes')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET - INSPIRE themes, version 1.0</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">geonetwork.thesaurus.external.theme.inspire-theme</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Initiativ -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'Initiativ')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'Initiativ')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Initiativ</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2011-04-04</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/swe/thesaurus.download?ref=external.theme.Initiativ">geonetwork.thesaurus.external.theme.Initiativ</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Topic Category -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory" />

          <action type="add"
                  if="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory) = 0"
                  name="topicCategory" or="topicCategory"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:topicCategory>
                  <gmd:MD_TopicCategoryCode></gmd:MD_TopicCategoryCode>
                </gmd:topicCategory>
              </snippet>
            </template>
          </action>

          <!-- Character set -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:characterSet" />

          <!-- Point of contact -->
          <field name="pointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact" />

          <!-- Thumbnails -->
          <field name="graphicOverview"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview" />
        </section>

        <section name="extent">
          <!-- Extent description - dataset -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent description - service -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent - dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Extent - service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - dataset -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - dataset -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - services -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - service -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement3"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="verticalElementSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:verticalElement"
                 del="../..">
            <template>
              <values>
                <key label="vertical_crs_minimum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:minimumValue/gco:Real"
                     tooltip="gmd:minimumValue"
                     use="number"/>

                <key label="vertical_crs_maximum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:maximumValue/gco:Real"
                     tooltip="gmd:maximumValue"
                     use="number"/>

                <key label="vertical_crs_datum"
                     xpath="gmd:EX_VerticalExtent/gmd:verticalCRS/@xlink:title"
                     tooltip="gmd:verticalCRS">>
                  <helper name="gmd:verticalCRS" />
                </key>
              </values>
              <snippet>
                <gmd:verticalElement>
                  <gmd:EX_VerticalExtent>
                    <gmd:minimumValue>
                      <gco:Real>{{vertical_crs_minimum_value}}</gco:Real>
                    </gmd:minimumValue>
                    <gmd:maximumValue>
                      <gco:Real>{{vertical_crs_maximum_value}}</gco:Real>
                    </gmd:maximumValue>
                    <gmd:verticalCRS xlink:title="{{vertical_crs_datum}}"/>
                  </gmd:EX_VerticalExtent>
                </gmd:verticalElement>
              </snippet>
            </template>
          </field>

        </section>

        <section name="restrictions">
          <!-- Dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

        </section>

        <!--<section name="restrictions">
          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="accessConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>


          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                <gmd:accessConstraints>
                  <gmd:MD_RestrictionCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                          codeListValue="otherRestrictions"/>
                </gmd:accessConstraints>
              </snippet>
            </template>
          </action>



          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

        </section>-->

        <section name="metadataMaintenance2">

          <field name="resourceMaintanceSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceMaintenance"
                 del=".">
            <template>
              <values>
                <key label="maintenance_note"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceNote/gco:CharacterString"
                     use="textarea"
                     tooltip="gmd:maintenanceNote"/>

                <key label="maintenance_frequency"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceAndUpdateFrequency/gmd:MD_MaintenanceFrequencyCode/@codeListValue"
                     tooltip="gmd:maintenanceAndUpdateFrequency">
                  <codelist name="gmd:MD_MaintenanceFrequencyCode"/>
                </key>
              </values>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue="{{maintenance_frequency}}"/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString>{{maintenance_note}}</gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </field>

          <!-- Datasets -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

        </section>

        <section name="service" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"
            or="serviceType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />


          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
            or="operatesOn"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />

        </section>


        <section name="dataset" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">


          <field
            name="spatialRepresentationType"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType"
            or="spatialRepresentationType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />


          <section name="scales" tooltip="gmd:spatialResolution">
            <field
              name="equivalentScale"
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />
          </section>


          <!-- Resource language -->
          <field
            name="language"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:language"
            or="language"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />
          <action type="add" name="language" or="language"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:language>
                  <gmd:LanguageCode codeList="http://www.loc.gov/standards/iso639-2/" codeListValue=""/>
                </gmd:language>
              </snippet>
            </template>
          </action>
        </section>

        <section name="dataQualityInfo2">
          <field
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>

          <field name="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <field name="conformity" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                    gmd:report/gmd:DQ_DomainConsistency/gmd:result"
                 del="../..">
            <template>
              <values>
                <key label="conformity_title"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString"
                     tooltip="gmd:pass">
                  <helper name="gmd:title" context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_date"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"
                     tooltip="gmd:date"
                     use="date"/>
                <key label="explanation"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:explanation/gco:CharacterString"
                     tooltip="gmd:explanation|gmd:DQ_ConformanceResult"
                     use="textarea"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>{{conformity_title}}</gco:CharacterString>
                          <gn:copy select="gmd:PT_FreeText"/>
                        </gmd:title>
                        <gn:copy select="gmd:alternateTitle"/>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>{{conformity_date}}</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gn:copy select="gmd:edition"/>
                        <gn:copy select="gmd:editionDate"/>
                        <gn:copy select="gmd:identifier"/>
                        <gn:copy select="gmd:citedResponsibleParty"/>
                        <gn:copy select="gmd:presentationForm"/>
                        <gn:copy select="gmd:series"/>
                        <gn:copy select="gmd:otherCitationDetails"/>
                        <gn:copy select="gmd:collectiveTitle"/>
                        <gn:copy select="gmd:ISBN"/>
                        <gn:copy select="gmd:ISSN"/>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>


          <action type="add" name="conformity" or="report" tooltip="gmd:result"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString/>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date/>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString/>
                        </gmd:explanation>
                        <gmd:pass gco:nilReason="unknown">
                          <gco:Boolean/>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


        </section>

        <section name="referenceSystemInfo2" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
          <field name="rsIdentifier"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../.." />

          <action type="add" name="referenceSystemInfo2" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata"
                  if="count(gmd:MD_Metadata/gmd:referenceSystemInfo) = 0">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString></gco:CharacterString>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>

          <!--<field name="rsIdentifier" templateModeOnly="false"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>

              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gn:copy select="gmd:version"/>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>-->


          <!--<action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>-->
        </section>

        <section name="resources">
          <section xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor" or="distributor"
                   in="/gmd:MD_Metadata"/>

          <action type="add" name="add-distributor" btnLabel="add-distributor"
                  or="distributor" in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributor>
                  <gmd:MD_Distributor>
                    <gmd:distributorContact></gmd:distributorContact>
                    <gmd:distributorFormat></gmd:distributorFormat>
                    <gmd:distributorTransferOptions>
                      <gmd:MD_DigitalTransferOptions>
                        <gmd:onLine></gmd:onLine>
                      </gmd:MD_DigitalTransferOptions>
                    </gmd:distributorTransferOptions>
                  </gmd:MD_Distributor>
                </gmd:distributor>
              </snippet>
            </template>
          </action>
        </section>

        <section name="inspire_sds"  displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
          <!-- CONFORMITY CLASS 1 -->
          <section name="inspire_sds_cc1">

            <!-- 4.4.1 TG4 : ensure gmd:DQ_DataQuality for service exists -->
            <action type="process"
                    process="sds-add-dataquality"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])=0"/>

            <!-- 4.4.1 rec 1 : replace CharacterString with Anchor-->
            <action type="process"
                    process="sds-fix-category"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)>0"/>

            <!-- 4.4.1 category -->
            <field name="sds-category"
                   xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>

            <!-- 4.4.1 pass -->
            <field
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:pass"/>

            <action type="add"
                    name="inspire_add_pass"
                    forceLabel="true"
                    or="pass"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult">
              <template>
                <snippet>
                  <gmd:pass>
                    <gco:Boolean>true</gco:Boolean>
                  </gmd:pass>
                </snippet>
              </template>
            </action>


            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** accessPoint *** -->

            <field name="sds-accesspoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'accessPoint']"

                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-accesspoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://accesspoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>

            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** endPoint *** -->

            <field name="sds-endpoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'endPoint']"
                   notDisplayedIfMissing="true"
                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-endpoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://endpoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>


            <!-- 4.4.3 TG8: edit Technical specification -->

            <field
              templateModeOnly="true"
              notDisplayedIfMissing="true"
              forceLabel="true"
              name="sds-tech-spec"
              del="../.."
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_FormatConsistency/gmd:result">
              <template>
                <values>
                  <key label="conformity_linkage"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                  <key label="conformity_desc"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                       tooltip="gmd:pass">
                    <helper name="gmd:title"
                            context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_FormatConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                  </key>
                  <key label="conformity_date" use="gn-date-picker"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"/>
                  <key label="explanation" use="text"
                       xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                </values>
                <snippet>
                  <gmd:result>
                    <gmd:DQ_ConformanceResult>
                      <gmd:specification>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                            </gmx:Anchor>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                <gco:Date>{{conformity_date}}</gco:Date>
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode
                                  codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                  codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:specification>
                      <gmd:explanation>
                        <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      </gmd:explanation>
                      <gmd:pass>
                        <gco:Boolean>true</gco:Boolean>
                      </gmd:pass>
                    </gmd:DQ_ConformanceResult>
                  </gmd:result>
                </snippet>
              </template>
            </field>

            <!-- 4.4.3 TG8: add Technical specification entry -->

            <action type="add"
                    name="sds-add-tech-spec"
                    forceLabel="true"
                    or="report"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

              <template>
                <snippet>
                  <gmd:report>
                    <gmd:DQ_FormatConsistency>
                      <gmd:result>
                        <gmd:DQ_ConformanceResult>
                          <gmd:specification>
                            <gmd:CI_Citation>
                              <gmd:title>
                                <gmx:Anchor xlink:href=" http://link,to/the.technical.specification">
                                  Description of technical specification
                                </gmx:Anchor>
                              </gmd:title>
                              <gmd:date>
                                <gmd:CI_Date>
                                  <gmd:date>
                                    <gco:Date>2014-12-11</gco:Date>
                                  </gmd:date>
                                  <gmd:dateType>
                                    <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                                  </gmd:dateType>
                                </gmd:CI_Date>
                              </gmd:date>
                            </gmd:CI_Citation>
                          </gmd:specification>
                          <gmd:explanation>
                            <gco:CharacterString>Conformant to the cited specifications.
                            </gco:CharacterString>
                          </gmd:explanation>
                          <gmd:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </gmd:pass>
                        </gmd:DQ_ConformanceResult>
                      </gmd:result>
                    </gmd:DQ_FormatConsistency>
                  </gmd:report>
                </snippet>
              </template>
            </action>

          </section>

          <!-- CONFORMITY CLASS 2 -->
          <section name="inspire_sds_cc2">

            <section name="sds-section-crs">
              <field
                xpath="gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier/gmd:code/gmx:Anchor"
                del="."/>
              <!-- The useXmlSnippet="true" attribute is a workaround to keep backward compatibility since often
              the data-gn-crs-selector directive is used specifying a snippet as below although the developer wanted
              to use the hardcoded snipped in EditorXMLService.js. We need a way to specify if we really want
              to use the snippet below. The attribute is used in the template render-element-template-field located in form-builder.xsl-->
              <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                      useXmlSnippet="true"
                      or="referenceSystemInfo" in="/gmd:MD_Metadata">
                <template>
                  <snippet>
                    <gmd:referenceSystemInfo>
                      <gmd:MD_ReferenceSystem>
                        <gmd:referenceSystemIdentifier>
                          <gmd:RS_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href='http://www.opengis.net/def/crs/EPSG/0/{{code}}'
                                          xlink:title='{{description}}'>{{code}}
                              </gmx:Anchor>
                            </gmd:code>
                          </gmd:RS_Identifier>
                        </gmd:referenceSystemIdentifier>
                      </gmd:MD_ReferenceSystem>
                    </gmd:referenceSystemInfo>
                  </snippet>
                </template>
              </action>
            </section>

            <!-- 4.5.2 Ensure gmd:DQ_ConceptualConsistency mandatory elements for quality of service exists -->

            <section name="sds-section-qos">

              <action type="process"
                      process="sds-add-qualityofservice"
                      if="(count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])>0 and
                              (count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='availability'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='performance'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='capacity'])=0 ))"/>

              <field
                xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency"/>

            </section>

            <!-- 4.5.3 TG13 Conditions applying to access and use -->

            <section name="accessConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- accessConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- accessConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- accessConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- access constraints -->

            <section name="useConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- useConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- useConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>

                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- useConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- use constraints -->

            <section name="sds-section-custodian">

              <field name="pointOfContact"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue='custodian']"
              />


            </section>

          </section>

          <!-- CONFORMITY CLASS 3 -->

          <section name="inspire_sds_cc3">

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"/>

            <action type="add"
                    forceLabel="true"
                    name="sds-addOperation"
                    or="containsOperations"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
              <template>
                <snippet>
                  <srv:containsOperations>
                    <srv:SV_OperationMetadata>
                      <srv:operationName>
                        <gco:CharacterString></gco:CharacterString>
                      </srv:operationName>
                      <srv:DCP>
                        <srv:DCPList
                          codeList="http://inspire.ec.europa.eu/metadata-codelist/DCPList"
                          codeListValue="webServices">Web services
                        </srv:DCPList>
                      </srv:DCP>
                      <srv:connectPoint>
                        <gmd:CI_OnlineResource>
                          <gmd:linkage>
                            <gmd:URL>http://</gmd:URL>
                          </gmd:linkage>
                        </gmd:CI_OnlineResource>
                      </srv:connectPoint>
                    </srv:SV_OperationMetadata>
                  </srv:containsOperations>
                </snippet>
              </template>
            </action>

          </section>

        </section>
      </tab>

      <thesaurusList>
        <thesaurus key="external.theme.Initiativ"
                   widgetMode="checkboxes" />
      </thesaurusList>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="srv:containsOperations"/>
        <for name="srv:SV_OperationMetadata"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>
    </view>

    <!-- All elements, No admin-elements -->
    <view name="swedish-c" disabled="true" upAndDownControlHidden="true">
      <tab id="swedish-c" default="true" mode="flat">
        <section name="metadata2">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <field xpath="/gmd:MD_Metadata/gmd:language" or="language"
                 in="/gmd:MD_Metadata"/>

          <field name="metadataPointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:contact" />

          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
        </section>

        <section name="identificationInfo2">
          <!-- Title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"
            or="title"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation" />

          <!--Alternative title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:alternateTitle"
            or="alternateTitle"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
            del="."/>


          <!-- Dates -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date" />

          <action type="add" name="referenceDateAdd" or="date"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date) = 0">
            <template>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>
                      <gco:Date></gco:Date>
                    </gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </action>

          <!-- Resource identifier for dataset, service
           and add action to compute it if not defined. -->
          <field name="identifier" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <field name="identifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <action type="add" name="identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>


          <!-- Abstract -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract" />

          <!-- Status -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status" />


          <!-- Keywords -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword[not(../gmd:thesaurusName)]"
            or="keyword"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[not(gmd:thesaurusName)]"/>

          <!-- INSPIRE Themes -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'INSPIRE themes')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  btnLabel="addInspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'INSPIRE themes')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET - INSPIRE themes, version 1.0</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">geonetwork.thesaurus.external.theme.inspire-theme</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Initiativ -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'Initiativ')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'Initiativ')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Initiativ</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2011-04-04</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/swe/thesaurus.download?ref=external.theme.Initiativ">geonetwork.thesaurus.external.theme.Initiativ</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Topic Category -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory" />

          <action type="add"
                  if="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory) = 0"
                  name="topicCategory" or="topicCategory"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:topicCategory>
                  <gmd:MD_TopicCategoryCode></gmd:MD_TopicCategoryCode>
                </gmd:topicCategory>
              </snippet>
            </template>
          </action>

          <!-- Character set -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:characterSet" />

          <!-- Point of contact -->
          <field name="pointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact" />

          <!-- Thumbnails -->
          <field name="graphicOverview"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview" />
        </section>

        <section name="extent">
          <!-- Extent description - dataset -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent description - service -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/srv:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent - dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Extent - service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - dataset -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - dataset -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - services -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - service -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement2"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="verticalElementSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:verticalElement"
                 del="../..">
            <template>
              <values>
                <key label="vertical_crs_minimum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:minimumValue/gco:Real"
                     tooltip="gmd:minimumValue"
                     use="number"/>

                <key label="vertical_crs_maximum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:maximumValue/gco:Real"
                     tooltip="gmd:maximumValue"
                     use="number"/>

                <key label="vertical_crs_datum"
                     xpath="gmd:EX_VerticalExtent/gmd:verticalCRS/@xlink:title"
                     tooltip="gmd:verticalCRS">>
                  <helper name="gmd:verticalCRS" />
                </key>
              </values>
              <snippet>
                <gmd:verticalElement>
                  <gmd:EX_VerticalExtent>
                    <gmd:minimumValue>
                      <gco:Real>{{vertical_crs_minimum_value}}</gco:Real>
                    </gmd:minimumValue>
                    <gmd:maximumValue>
                      <gco:Real>{{vertical_crs_maximum_value}}</gco:Real>
                    </gmd:maximumValue>
                    <gmd:verticalCRS xlink:title="{{vertical_crs_datum}}"/>
                  </gmd:EX_VerticalExtent>
                </gmd:verticalElement>
              </snippet>
            </template>
          </field>

        </section>

        <section name="restrictions">
          <!-- Dataset -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints"
            if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" or="resourceConstraints" btnLabel="UseRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <action type="add" or="resourceConstraints" btnLabel="AccessRestrictionsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="otherRestrictions"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode codeListValue="restricted"
                                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_RestrictionCode"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

        </section>

        <!--<section name="restrictions">
          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="accessConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>


          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                <gmd:accessConstraints>
                  <gmd:MD_RestrictionCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                          codeListValue="otherRestrictions"/>
                </gmd:accessConstraints>
              </snippet>
            </template>
          </action>



          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

        </section>-->

        <section name="metadataMaintenance2">

          <field name="resourceMaintanceSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceMaintenance"
                 del=".">
            <template>
              <values>
                <key label="maintenance_note"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceNote/gco:CharacterString"
                     use="textarea"
                     tooltip="gmd:maintenanceNote"/>

                <key label="maintenance_frequency"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceAndUpdateFrequency/gmd:MD_MaintenanceFrequencyCode/@codeListValue"
                     tooltip="gmd:maintenanceAndUpdateFrequency">
                  <codelist name="gmd:MD_MaintenanceFrequencyCode"/>
                </key>
              </values>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue="{{maintenance_frequency}}"/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString>{{maintenance_note}}</gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </field>

          <!-- Datasets -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

        </section>

        <section name="service" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"
            or="serviceType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />


          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
            or="operatesOn"
            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />

        </section>


        <section name="dataset" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">


          <field
            name="spatialRepresentationType"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType"
            or="spatialRepresentationType"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />


          <section name="scales" tooltip="gmd:spatialResolution">
            <field
              name="equivalentScale"
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance"
              in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />
          </section>


          <!-- Resource language -->
          <field
            name="language"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:language"
            or="language"
            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />
          <action type="add" name="language" or="language"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:language>
                  <gmd:LanguageCode codeList="http://www.loc.gov/standards/iso639-2/" codeListValue=""/>
                </gmd:language>
              </snippet>
            </template>
          </action>
        </section>

        <section name="dataQualityInfo2">
          <field
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>

          <field name="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <field name="conformity" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                    gmd:report/gmd:DQ_DomainConsistency/gmd:result"
                 del="../..">
            <template>
              <values>
                <key label="conformity_title"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString"
                     tooltip="gmd:pass">
                  <helper name="gmd:title" context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_date"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"
                     tooltip="gmd:date"
                     use="date"/>
                <key label="explanation"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:explanation/gco:CharacterString"
                     tooltip="gmd:explanation|gmd:DQ_ConformanceResult"
                     use="textarea"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>{{conformity_title}}</gco:CharacterString>
                          <gn:copy select="gmd:PT_FreeText"/>
                        </gmd:title>
                        <gn:copy select="gmd:alternateTitle"/>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>{{conformity_date}}</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gn:copy select="gmd:edition"/>
                        <gn:copy select="gmd:editionDate"/>
                        <gn:copy select="gmd:identifier"/>
                        <gn:copy select="gmd:citedResponsibleParty"/>
                        <gn:copy select="gmd:presentationForm"/>
                        <gn:copy select="gmd:series"/>
                        <gn:copy select="gmd:otherCitationDetails"/>
                        <gn:copy select="gmd:collectiveTitle"/>
                        <gn:copy select="gmd:ISBN"/>
                        <gn:copy select="gmd:ISSN"/>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>


          <action type="add" name="conformity" or="report" tooltip="gmd:result"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString/>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date/>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString/>
                        </gmd:explanation>
                        <gmd:pass gco:nilReason="unknown">
                          <gco:Boolean/>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


        </section>

        <section name="referenceSystemInfo2" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
          <field name="rsIdentifier"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../.." />

          <action type="add" name="referenceSystemInfo2" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata"
                  if="count(gmd:MD_Metadata/gmd:referenceSystemInfo) = 0">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString></gco:CharacterString>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>

          <!--<field name="rsIdentifier" templateModeOnly="false"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>

              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gn:copy select="gmd:version"/>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>-->


          <!--<action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>-->
        </section>

        <section name="resources">
          <section xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor" or="distributor"
                   in="/gmd:MD_Metadata"/>

          <action type="add" name="add-distributor" btnLabel="add-distributor"
                  or="distributor" in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributor>
                  <gmd:MD_Distributor>
                    <gmd:distributorContact></gmd:distributorContact>
                    <gmd:distributorFormat></gmd:distributorFormat>
                    <gmd:distributorTransferOptions>
                      <gmd:MD_DigitalTransferOptions>
                        <gmd:onLine></gmd:onLine>
                      </gmd:MD_DigitalTransferOptions>
                    </gmd:distributorTransferOptions>
                  </gmd:MD_Distributor>
                </gmd:distributor>
              </snippet>
            </template>
          </action>
        </section>

        <section name="inspire_sds"  displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
          <!-- CONFORMITY CLASS 1 -->
          <section name="inspire_sds_cc1">

            <!-- 4.4.1 TG4 : ensure gmd:DQ_DataQuality for service exists -->
            <action type="process"
                    process="sds-add-dataquality"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])=0"/>

            <!-- 4.4.1 rec 1 : replace CharacterString with Anchor-->
            <action type="process"
                    process="sds-fix-category"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)>0"/>

            <!-- 4.4.1 category -->
            <field name="sds-category"
                   xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>

            <!-- 4.4.1 pass -->
            <field
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:pass"/>

            <action type="add"
                    name="inspire_add_pass"
                    forceLabel="true"
                    or="pass"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult">
              <template>
                <snippet>
                  <gmd:pass>
                    <gco:Boolean>true</gco:Boolean>
                  </gmd:pass>
                </snippet>
              </template>
            </action>


            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** accessPoint *** -->

            <field name="sds-accesspoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'accessPoint']"

                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-accesspoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://accesspoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>

            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** endPoint *** -->

            <field name="sds-endpoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'endPoint']"
                   notDisplayedIfMissing="true"
                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-endpoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://endpoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                          xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                          codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>


            <!-- 4.4.3 TG8: edit Technical specification -->

            <field
              templateModeOnly="true"
              notDisplayedIfMissing="true"
              forceLabel="true"
              name="sds-tech-spec"
              del="../.."
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_FormatConsistency/gmd:result">
              <template>
                <values>
                  <key label="conformity_linkage"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                  <key label="conformity_desc"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                       tooltip="gmd:pass">
                    <helper name="gmd:title"
                            context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_FormatConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                  </key>
                  <key label="conformity_date" use="gn-date-picker"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"/>
                  <key label="explanation" use="text"
                       xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                </values>
                <snippet>
                  <gmd:result>
                    <gmd:DQ_ConformanceResult>
                      <gmd:specification>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                            </gmx:Anchor>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                <gco:Date>{{conformity_date}}</gco:Date>
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode
                                  codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                  codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:specification>
                      <gmd:explanation>
                        <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      </gmd:explanation>
                      <gmd:pass>
                        <gco:Boolean>true</gco:Boolean>
                      </gmd:pass>
                    </gmd:DQ_ConformanceResult>
                  </gmd:result>
                </snippet>
              </template>
            </field>

            <!-- 4.4.3 TG8: add Technical specification entry -->

            <action type="add"
                    name="sds-add-tech-spec"
                    forceLabel="true"
                    or="report"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

              <template>
                <snippet>
                  <gmd:report>
                    <gmd:DQ_FormatConsistency>
                      <gmd:result>
                        <gmd:DQ_ConformanceResult>
                          <gmd:specification>
                            <gmd:CI_Citation>
                              <gmd:title>
                                <gmx:Anchor xlink:href=" http://link,to/the.technical.specification">
                                  Description of technical specification
                                </gmx:Anchor>
                              </gmd:title>
                              <gmd:date>
                                <gmd:CI_Date>
                                  <gmd:date>
                                    <gco:Date>2014-12-11</gco:Date>
                                  </gmd:date>
                                  <gmd:dateType>
                                    <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                                  </gmd:dateType>
                                </gmd:CI_Date>
                              </gmd:date>
                            </gmd:CI_Citation>
                          </gmd:specification>
                          <gmd:explanation>
                            <gco:CharacterString>Conformant to the cited specifications.
                            </gco:CharacterString>
                          </gmd:explanation>
                          <gmd:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </gmd:pass>
                        </gmd:DQ_ConformanceResult>
                      </gmd:result>
                    </gmd:DQ_FormatConsistency>
                  </gmd:report>
                </snippet>
              </template>
            </action>

          </section>

          <!-- CONFORMITY CLASS 2 -->
          <section name="inspire_sds_cc2">

            <section name="sds-section-crs">
              <field
                xpath="gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier/gmd:code/gmx:Anchor"
                del="."/>
              <!-- The useXmlSnippet="true" attribute is a workaround to keep backward compatibility since often
              the data-gn-crs-selector directive is used specifying a snippet as below although the developer wanted
              to use the hardcoded snipped in EditorXMLService.js. We need a way to specify if we really want
              to use the snippet below. The attribute is used in the template render-element-template-field located in form-builder.xsl-->
              <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                      useXmlSnippet="true"
                      or="referenceSystemInfo" in="/gmd:MD_Metadata">
                <template>
                  <snippet>
                    <gmd:referenceSystemInfo>
                      <gmd:MD_ReferenceSystem>
                        <gmd:referenceSystemIdentifier>
                          <gmd:RS_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href='http://www.opengis.net/def/crs/EPSG/0/{{code}}'
                                          xlink:title='{{description}}'>{{code}}
                              </gmx:Anchor>
                            </gmd:code>
                          </gmd:RS_Identifier>
                        </gmd:referenceSystemIdentifier>
                      </gmd:MD_ReferenceSystem>
                    </gmd:referenceSystemInfo>
                  </snippet>
                </template>
              </action>
            </section>

            <!-- 4.5.2 Ensure gmd:DQ_ConceptualConsistency mandatory elements for quality of service exists -->

            <section name="sds-section-qos">

              <action type="process"
                      process="sds-add-qualityofservice"
                      if="(count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])>0 and
                              (count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='availability'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='performance'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='capacity'])=0 ))"/>

              <field
                xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency"/>

            </section>

            <!-- 4.5.3 TG13 Conditions applying to access and use -->

            <section name="accessConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- accessConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- accessConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- accessConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- access constraints -->

            <section name="useConstraints">

              <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
              <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                templateModeOnly="true"
                notDisplayedIfMissing="true"
                forceLabel="true"
                name="sds-limitation"
                del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              <!-- useConstraints: ADD "no constraints" if element not defined -->
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- useConstraints: ADD "unknown constraints" if element not defined -->
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>

                        <gmd:otherConstraints>
                          <gmx:Anchor
                            xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              <!-- useConstraints: ADD custom constraints if element not defined -->

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> <!-- use constraints -->

            <section name="sds-section-custodian">

              <field name="pointOfContact"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue='custodian']"
              />


            </section>

          </section>

          <!-- CONFORMITY CLASS 3 -->

          <section name="inspire_sds_cc3">

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"/>

            <action type="add"
                    forceLabel="true"
                    name="sds-addOperation"
                    or="containsOperations"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
              <template>
                <snippet>
                  <srv:containsOperations>
                    <srv:SV_OperationMetadata>
                      <srv:operationName>
                        <gco:CharacterString></gco:CharacterString>
                      </srv:operationName>
                      <srv:DCP>
                        <srv:DCPList
                          codeList="http://inspire.ec.europa.eu/metadata-codelist/DCPList"
                          codeListValue="webServices">Web services
                        </srv:DCPList>
                      </srv:DCP>
                      <srv:connectPoint>
                        <gmd:CI_OnlineResource>
                          <gmd:linkage>
                            <gmd:URL>http://</gmd:URL>
                          </gmd:linkage>
                        </gmd:CI_OnlineResource>
                      </srv:connectPoint>
                    </srv:SV_OperationMetadata>
                  </srv:containsOperations>
                </snippet>
              </template>
            </action>

          </section>

        </section>
      </tab>

      <thesaurusList>
        <thesaurus key="external.theme.Initiativ"
                   widgetMode="checkboxes" />
      </thesaurusList>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="srv:containsOperations"/>
        <for name="srv:SV_OperationMetadata"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>
    </view>

    <!-- All elements, with admin-elements -->
    <view name="swedish" upAndDownControlHidden="true">
      <tab id="swedish" default="true" mode="flat">
        <!-- Information om metadata -->
        <section name="metadata2" tooltip="gmd:MD_Metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <field xpath="/gmd:MD_Metadata/gmd:language" or="language"
                 in="/gmd:MD_Metadata"/>

          <field name="metadataPointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:contact" />

          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
        </section>

        <!-- Identifiering av resurs -->
        <section name="identificationInfo2">
          <!-- Title -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"
            or="title"
            in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation" />

          <!--Alternative title -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:alternateTitle"
                  or="alternateTitle"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  del="."/>


          <!-- Dates -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date" />

          <action type="add" name="referenceDateAdd" or="date"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date) = 0">
            <template>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>
                      <gco:Date></gco:Date>
                    </gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </action>

          <!-- Resource identifier for dataset, service
           and add action to compute it if not defined. -->
          <field name="identifier" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <field name="identifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <action type="add" name="identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>


          <!-- Abstract -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract" />

          <!-- Status -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status" />


          <!-- Keywords -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword[not(../gmd:thesaurusName)]"
                  or="keyword"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[not(gmd:thesaurusName)]"/>

          <!-- INSPIRE Themes -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'INSPIRE themes')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  btnLabel="addInspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'INSPIRE themes')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET - INSPIRE themes, version 1.0</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">geonetwork.thesaurus.external.theme.inspire-theme</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Initiativ -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'Initiativ')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'Initiativ')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Initiativ</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2011-04-04</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/swe/thesaurus.download?ref=external.theme.Initiativ">geonetwork.thesaurus.external.theme.Initiativ</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <!-- Topic Category: Services -->
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'Amnesomrade')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add" btnLabel="addTopicCategory"
                  name="topicCategory"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'Amnesomrade')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>Amnesomrade</gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-04-17</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                   codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor xmlns:gmx="http://www.isotc211.org/2005/gmx"
                                          xlink:href="http://localhost:8080/geonetwork/srv/swe/thesaurus.download?ref=external.theme.Initiativ">geonetwork.thesaurus.external.theme.topic-categories</gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>


          <!-- Topic Category -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory" />

          <action type="add"
                  if="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory) = 0"
                  name="topicCategory" or="topicCategory"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:topicCategory>
                  <gmd:MD_TopicCategoryCode></gmd:MD_TopicCategoryCode>
                </gmd:topicCategory>
              </snippet>
            </template>
          </action>

          <!-- Character set -->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_IdentificationInfo/gmd:characterSet" />

          <!-- Point of contact -->
          <field name="pointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_IdentificationInfo/gmd:pointOfContact" />

          <field name="pointOfContact"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact"
               />

          <!-- Thumbnails -->
          <field name="graphicOverview"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_IdentificationInfo/gmd:graphicOverview" />
        </section>

        <!-- Geografisk, temporal och vertikal utsträckning -->
        <section name="extent">
          <!-- Extent description - dataset -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent description - service -->
          <field name="description"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:description"
                 or="description"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent"
                 del="."/>

          <!-- Extent - dataset -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Extent - service -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - dataset -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                          data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - dataset -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="1234">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <!-- Temporal extent - services -->
          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gml:beginPosition">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gml:endPosition"
                >
                  <directiveAttributes
                          data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - service -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="verticalElementSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/gmd:EX_Extent/gmd:verticalElement"
                 del="../..">
            <template>
              <values>
                <key label="vertical_crs_minimum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:minimumValue/gco:Real"
                     tooltip="gmd:minimumValue"
                     use="number"/>

                <key label="vertical_crs_maximum_value"
                     xpath="gmd:EX_VerticalExtent/gmd:maximumValue/gco:Real"
                     tooltip="gmd:maximumValue"
                     use="number"/>

                <key label="vertical_crs_datum"
                     xpath="gmd:EX_VerticalExtent/gmd:verticalCRS/@xlink:title"
                     tooltip="gmd:verticalCRS">>
                  <helper name="gmd:verticalCRS" />
                </key>
              </values>
              <snippet>
                <gmd:verticalElement>
                  <gmd:EX_VerticalExtent>
                    <gmd:minimumValue>
                      <gco:Real>{{vertical_crs_minimum_value}}</gco:Real>
                    </gmd:minimumValue>
                    <gmd:maximumValue>
                      <gco:Real>{{vertical_crs_maximum_value}}</gco:Real>
                    </gmd:maximumValue>
                    <gmd:verticalCRS xlink:title="{{vertical_crs_datum}}"/>
                  </gmd:EX_VerticalExtent>
                </gmd:verticalElement>
              </snippet>
            </template>
          </field>

        </section>

        <!-- Restriktioner -->
        <section name="restrictions" displayIfRecord="(count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) + count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification[srv:serviceType/gco:LocalName != 'other'])) > 0 ">
          <!-- Use limitations -->
          <field
            name="useLimitation"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation" />
          <action type="add" name="useLimitation" or="resourceConstraints" btnLabel="useLimitation"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation) = 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!--Limitations on public access. -->
          <!--<field name="limitationsPublicAccess"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

          <field name="limitationsPublicAccess"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]]"
                 />

          <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="limitationsPublicAccess"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]) = 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                        codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                        codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations">no limitations to public access</gmx:Anchor>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!-- Conditions for access -->
          <!--<field name="conditionsForAccess"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

          <field name="conditionsForAccess"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]]"
                 />


          <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="conditionsForAccess"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]) = 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                        codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                        codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
                    <gmd:otherConstraints>
                      <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">conditions to access and use unknown</gmx:Anchor>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <!-- Conditions for use -->
          <!--<field name="conditionsForUse"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

          <field name="conditionsForUse"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints]"
                />


          <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="conditionsForUse"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                  gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints) = 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:useConstraints>
                      <gmd:MD_RestrictionCode
                        codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                        codeListValue="otherRestrictions"/>
                    </gmd:useConstraints>
                    <gmd:otherConstraints>
                      <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">conditions to access and use unknown</gmx:Anchor>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>
        </section>


        <!--<section name="restrictions">
          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="accessConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>


          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                <gmd:accessConstraints>
                  <gmd:MD_RestrictionCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                          codeListValue="otherRestrictions"/>
                </gmd:accessConstraints>
              </snippet>
            </template>
          </action>



          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="accessConstraints" btnLabel="legalConstraintsBtn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints) > 0">
            <template>
              <snippet>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

        </section>-->

        <!-- Underhäll -->
        <section name="metadataMaintenance2">

          <field name="resourceMaintanceSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceMaintenance"
                 del=".">
            <template>
              <values>
                <key label="maintenance_note"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceNote/gco:CharacterString"
					 use="textarea"
                     tooltip="gmd:maintenanceNote"/>

                <key label="maintenance_frequency"
                     xpath="gmd:MD_MaintenanceInformation/gmd:maintenanceAndUpdateFrequency/gmd:MD_MaintenanceFrequencyCode/@codeListValue"
                     tooltip="gmd:maintenanceAndUpdateFrequency">
                  <codelist name="gmd:MD_MaintenanceFrequencyCode"/>
                </key>
              </values>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue="{{maintenance_frequency}}"/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString>{{maintenance_note}}</gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </field>

          <!-- Datasets -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

          <!-- Service -->
          <action type="add" name="resourceMaintanceSection" or="resourceMaintenance"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <gmd:resourceMaintenance>
                  <gmd:MD_MaintenanceInformation>
                    <gmd:maintenanceAndUpdateFrequency>
                      <gmd:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodeLists.xml#MD_MaintenanceFrequencyCode" codeListValue=""/>
                    </gmd:maintenanceAndUpdateFrequency>
                    <gmd:maintenanceNote>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:maintenanceNote>
                  </gmd:MD_MaintenanceInformation>
                </gmd:resourceMaintenance>
              </snippet>
            </template>
          </action>

        </section>

        <!-- Beskrivning av tjänst -->
        <section name="service" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"
                  or="serviceType"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
                  or="operatesOn"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/*" />

          <!--<action type="add" name="operatesOn" or="operatesOn"
                  forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <srv:operatesOn uuidref="" xlink:href=""/>
              </snippet>
            </template>
          </action>-->
        </section>

        <!-- Beskrivning av datamängd -->
        <section name="dataset" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">


          <field
                  name="spatialRepresentationType"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType"
                  or="spatialRepresentationType"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />


          <section name="scales" tooltip="gmd:spatialResolution">
            <field
                    name="equivalentScale"
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />

            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialResolution/gmd:MD_Resolution/*" />
          </section>


          <!-- Resource language -->
          <field
                  name="language"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:language"
                  or="language"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/*" />
          <action type="add" name="language" or="language"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:language>
                  <gmd:LanguageCode codeList="http://www.loc.gov/standards/iso639-2/" codeListValue=""/>
                </gmd:language>
              </snippet>
            </template>
          </action>
        </section>

        <!-- Kvaliteinformation -->
        <section name="dataQualityInfo2"  displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
          <field
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>

          <field name="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <!-- Regulations -->
          <field
            templateModeOnly="true"
            notDisplayedIfMissing="true"
            forceLabel="true"
            name="sds-reg-spec"
            del="../.."
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='dataset']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg') ]">
            <template>
              <values>
                <key label="reg_conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                <key label="reg_conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                     tooltip="gmd:pass">
                  <helper name="InspireRegulations" relAtt="reg_conformity_linkage" />
                </key>
                <key label="conformity_date" use="gn-date-picker"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                <key label="explanation" use="text"
                     xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{reg_conformity_linkage}}">{{reg_conformity_desc}}
                          </gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              {{conformity_date}}
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sds-add-reg-spec"
                  forceLabel="true"
                  or="report"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='dataset']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg')]) = 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='dataset']">

            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href="http://data.europa.eu/eli/reg/2010/1089">
                                KOMMISSIONENS FÖRORDNING (EU) nr 1089/2010 av den 23 november 2010 om genomförande av Europaparlamentets och rådets direktiv 2007/2/EG vad gäller interoperabilitet för rumsliga datamängder och datatjänster
                              </gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2010-12-08</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conformant to the cited specifications.
                          </gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>

          <!-- Technical report -->
          <field
            templateModeOnly="true"
            notDisplayedIfMissing="true"
            forceLabel="true"
            name="sds-tech-spec"
            del="../.."
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='dataset']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/Category')) and
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg'))]">
            <template>
              <values>
                <key label="conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                <key label="conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                     tooltip="gmd:pass">
                  <helper name="InspireTechnicalReport" relAtt="conformity_linkage" />
                </key>
                <key label="conformity_date" use="gn-date-picker"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                <key label="explanation" use="text"
                     xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                          </gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              {{conformity_date}}
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>

          <!-- 4.4.3 TG8: add Technical specification entry -->

          <action type="add"
                  name="sds-add-tech-spec"
                  forceLabel="true"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='dataset']">

            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href="http://link,to/the.technical.specification">
                                Description of technical specification
                              </gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2014-12-11</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conformant to the cited specifications.
                          </gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


        </section>


        <section name="dataQualityInfoService" displayIfRecord="gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/gco:LocalName != 'other'">
          <field
                  xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>

          <field name="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage" if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <!-- Regulations -->
          <field
            templateModeOnly="true"
            notDisplayedIfMissing="true"
            forceLabel="true"
            name="sds-reg-spec"
            del="../.."
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg') ]">
            <template>
              <values>
                <key label="reg_conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                <key label="reg_conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                     tooltip="gmd:pass">
                  <helper name="InspireRegulations" relAtt="reg_conformity_linkage" />
                </key>
                <key label="conformity_date" use="gn-date-picker"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                <key label="explanation" use="text"
                     xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{reg_conformity_linkage}}">{{reg_conformity_desc}}
                          </gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              {{conformity_date}}
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sds-add-reg-spec"
                  forceLabel="true"
                  or="report"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg')]) = 0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href="http://data.europa.eu/eli/reg/2010/1089">
                                KOMMISSIONENS FÖRORDNING (EU) nr 1089/2010 av den 23 november 2010 om genomförande av Europaparlamentets och rådets direktiv 2007/2/EG vad gäller interoperabilitet för rumsliga datamängder och datatjänster
                              </gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2010-12-08</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conformant to the cited specifications.
                          </gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>

          <!-- Technical report -->
          <field
            templateModeOnly="true"
            notDisplayedIfMissing="true"
            forceLabel="true"
            name="sds-tech-spec"
            del="../.."
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/Category')) and
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg'))]">
            <template>
              <values>
                <key label="conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                <key label="conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                     tooltip="gmd:pass">
                  <helper name="InspireTechnicalReport" relAtt="conformity_linkage" />
                </key>
                <key label="conformity_date" use="gn-date-picker"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                <key label="explanation" use="text"
                     xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                     tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                    data-tag-name="gmd:pass"
                    data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                    data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                          </gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              {{conformity_date}}
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>

          <!-- 4.4.3 TG8: add Technical specification entry -->

          <action type="add"
                  name="sds-add-tech-spec"
                  forceLabel="true"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href="http://link,to/the.technical.specification">
                                Description of technical specification
                              </gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2014-12-11</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                    codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                    codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conformant to the cited specifications.
                          </gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


        </section>

        <section name="dataQualityInfoSDS" displayIfRecord="gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/gco:LocalName = 'other'">
          <field
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level"/>
        </section>


        <section name="referenceSystemInfo2" displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0 or gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/gco:LocalName != 'other'">
          <field name="rsIdentifier"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../.." />

          <action type="add" name="referenceSystemInfo2" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata"
                  if="count(gmd:MD_Metadata/gmd:referenceSystemInfo) = 0">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString></gco:CharacterString>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>
          <!--<field name="rsIdentifier" templateModeOnly="false"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>

              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gn:copy select="gmd:version"/>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>-->


          <!--<action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>-->
        </section>

        <section name="resources" displayIfRecord="(count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) + count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification[srv:serviceType/gco:LocalName != 'other'])) > 0 ">
         <section xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor" or="distributor"
                   in="/gmd:MD_Metadata"/>

          <action type="add" name="add-distributor" btnLabel="add-distributor"
                  or="distributor" in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributor>
                  <gmd:MD_Distributor>
                    <gmd:distributorContact></gmd:distributorContact>
                    <gmd:distributorFormat></gmd:distributorFormat>
                    <gmd:distributorTransferOptions>
                      <gmd:MD_DigitalTransferOptions>
                        <gmd:onLine></gmd:onLine>
                      </gmd:MD_DigitalTransferOptions>
                    </gmd:distributorTransferOptions>
                  </gmd:MD_Distributor>
                </gmd:distributor>
              </snippet>
            </template>
          </action>
        </section>

        <section name="inspire_sds"  displayIfRecord="gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/gco:LocalName = 'other'">

          <!-- 4.4.1 TG4 : ensure gmd:DQ_DataQuality for service exists -->
          <action type="process"
                  process="sds-add-dataquality"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])=0"/>

          <!-- 4.4.1 rec 1 : replace CharacterString with Anchor-->
          <action type="process"
                  process="sds-fix-category"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)>0"/>

          <!-- 4.4.1 category -->
          <field name="sds-category"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title[starts-with(gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/id/ats/metadata/2.0')]"/>


          <!-- CONFORMITY CLASS 1 -->
          <section name="inspire_sds_cc1">

            <!-- 4.4.1 pass -->
            <field
                    xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult[starts-with(gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/id/ats/metadata/2.0')]/gmd:pass"/>

            <action type="add"
                    name="inspire_add_pass"
                    forceLabel="true"
                    or="pass"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult[starts-with(gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/id/ats/metadata/2.0')]">
              <template>
                <snippet>
                  <gmd:pass>
                    <gco:Boolean>true</gco:Boolean>
                  </gmd:pass>
                </snippet>
              </template>
            </action>



            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** accessPoint *** -->
            <section xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor" or="distributor"
                     in="/gmd:MD_Metadata"/>

            <action type="add" name="add-distributor" btnLabel="add-distributor"
                    or="distributor" in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
              <template>
                <snippet>
                  <gmd:distributor>
                    <gmd:MD_Distributor>
                      <gmd:distributorContact></gmd:distributorContact>
                      <gmd:distributorFormat></gmd:distributorFormat>
                      <gmd:distributorTransferOptions>
                        <gmd:MD_DigitalTransferOptions>
                          <gmd:onLine></gmd:onLine>
                        </gmd:MD_DigitalTransferOptions>
                      </gmd:distributorTransferOptions>
                    </gmd:MD_Distributor>
                  </gmd:distributor>
                </snippet>
              </template>
            </action>

            <!--<field name="sds-accesspoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'accessPoint']"

                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                                codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-accesspoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://accesspoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                          accessPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                                codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>-->

            <!-- 4.4.2 Resource locator -->
            <!-- 4.4.2 Function -->
            <!-- *** endPoint *** -->

            <!--<field name="sds-endpoint"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'endPoint']"
                   notDisplayedIfMissing="true"
                   del=".">
              <template>
                <values>
                  <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                </values>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>{{linkage}}</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                                codeListValue="information">
                        </gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-endpoint"
                    forceLabel="true"
                    or="onLine"
                    in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
              <template>
                <snippet>
                  <gmd:onLine>
                    <gmd:CI_OnlineResource>
                      <gmd:linkage>
                        <gmd:URL>http://endpoint.url</gmd:URL>
                      </gmd:linkage>
                      <gmd:description>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                          endPoint
                        </gmx:Anchor>
                      </gmd:description>
                      <gmd:function>
                        <gmd:CI_OnLineFunctionCode
                                codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                                codeListValue="information"></gmd:CI_OnLineFunctionCode>
                      </gmd:function>
                    </gmd:CI_OnlineResource>
                  </gmd:onLine>
                </snippet>
              </template>
            </action>-->


            <!-- 4.4.3 TG8: edit Technical specification -->

            <!-- Regulations -->
            <field
              templateModeOnly="true"
              notDisplayedIfMissing="true"
              forceLabel="true"
              name="sds-reg-spec"
              del="../.."
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg') ]">
              <template>
                <values>
                  <key label="reg_conformity_linkage"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                  <key label="reg_conformity_desc"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                       tooltip="gmd:pass">
                    <helper name="InspireRegulations" relAtt="reg_conformity_linkage" />
                  </key>
                  <key label="conformity_date" use="gn-date-picker"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                  <key label="explanation" use="text"
                       xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                  <key label="pass"
                       xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                       tooltip="gmd:pass"
                       use="gn-checkbox-with-nilreason">
                    <directiveAttributes
                      data-tag-name="gmd:pass"
                      data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                      data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                  </key>
                </values>
                <snippet>
                  <gmd:result>
                    <gmd:DQ_ConformanceResult>
                      <gmd:specification>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gmx:Anchor xlink:href="{{reg_conformity_linkage}}">{{reg_conformity_desc}}
                            </gmx:Anchor>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                {{conformity_date}}
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode
                                  codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                  codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:specification>
                      <gmd:explanation>
                        <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      </gmd:explanation>
                      {{pass}}
                    </gmd:DQ_ConformanceResult>
                  </gmd:result>
                </snippet>
              </template>
            </field>

            <action type="add"
                    name="sds-add-reg-spec"
                    forceLabel="true"
                    or="report"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg')]) = 0"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

              <template>
                <snippet>
                  <gmd:report>
                    <gmd:DQ_DomainConsistency>
                      <gmd:result>
                        <gmd:DQ_ConformanceResult>
                          <gmd:specification>
                            <gmd:CI_Citation>
                              <gmd:title>
                                <gmx:Anchor xlink:href="http://data.europa.eu/eli/reg/2010/1089">
                                  KOMMISSIONENS FÖRORDNING (EU) nr 1089/2010 av den 23 november 2010 om genomförande av Europaparlamentets och rådets direktiv 2007/2/EG vad gäller interoperabilitet för rumsliga datamängder och datatjänster
                                </gmx:Anchor>
                              </gmd:title>
                              <gmd:date>
                                <gmd:CI_Date>
                                  <gmd:date>
                                    <gco:Date>2010-12-08</gco:Date>
                                  </gmd:date>
                                  <gmd:dateType>
                                    <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                                  </gmd:dateType>
                                </gmd:CI_Date>
                              </gmd:date>
                            </gmd:CI_Citation>
                          </gmd:specification>
                          <gmd:explanation>
                            <gco:CharacterString>Conformant to the cited specifications.
                            </gco:CharacterString>
                          </gmd:explanation>
                          <gmd:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </gmd:pass>
                        </gmd:DQ_ConformanceResult>
                      </gmd:result>
                    </gmd:DQ_DomainConsistency>
                  </gmd:report>
                </snippet>
              </template>
            </action>

            <!-- Technical report -->
            <field
              templateModeOnly="true"
              notDisplayedIfMissing="true"
              forceLabel="true"
              name="sds-tech-spec"
              del="../.."
              xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result[
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://inspire.ec.europa.eu/id/ats/metadata/2.0')) and
                  not(starts-with(gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href, 'http://data.europa.eu/eli/reg'))]">
              <template>
                <values>
                  <key label="conformity_linkage"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                  <key label="conformity_desc"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                       tooltip="gmd:pass">
                    <helper name="InspireTechnicalReport" relAtt="conformity_linkage" />
                  </key>
                  <key label="conformity_date" use="gn-date-picker"
                       xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
                  <key label="explanation" use="text"
                       xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
                  <key label="pass"
                       xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
                       tooltip="gmd:pass"
                       use="gn-checkbox-with-nilreason">
                    <directiveAttributes
                      data-tag-name="gmd:pass"
                      data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                      data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                  </key>
                </values>
                <snippet>
                  <gmd:result>
                    <gmd:DQ_ConformanceResult>
                      <gmd:specification>
                        <gmd:CI_Citation>
                          <gmd:title>
                            <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                            </gmx:Anchor>
                          </gmd:title>
                          <gmd:date>
                            <gmd:CI_Date>
                              <gmd:date>
                                {{conformity_date}}
                              </gmd:date>
                              <gmd:dateType>
                                <gmd:CI_DateTypeCode
                                  codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                  codeListValue="publication"/>
                              </gmd:dateType>
                            </gmd:CI_Date>
                          </gmd:date>
                        </gmd:CI_Citation>
                      </gmd:specification>
                      <gmd:explanation>
                        <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      </gmd:explanation>
                      {{pass}}
                    </gmd:DQ_ConformanceResult>
                  </gmd:result>
                </snippet>
              </template>
            </field>

            <!-- 4.4.3 TG8: add Technical specification entry -->

            <action type="add"
                    name="sds-add-tech-spec"
                    forceLabel="true"
                    or="report"
                    in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

              <template>
                <snippet>
                  <gmd:report>
                    <gmd:DQ_DomainConsistency>
                      <gmd:result>
                        <gmd:DQ_ConformanceResult>
                          <gmd:specification>
                            <gmd:CI_Citation>
                              <gmd:title>
                                <gmx:Anchor xlink:href="http://link,to/the.technical.specification">
                                  Description of technical specification
                                </gmx:Anchor>
                              </gmd:title>
                              <gmd:date>
                                <gmd:CI_Date>
                                  <gmd:date>
                                    <gco:Date>2014-12-11</gco:Date>
                                  </gmd:date>
                                  <gmd:dateType>
                                    <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                                  </gmd:dateType>
                                </gmd:CI_Date>
                              </gmd:date>
                            </gmd:CI_Citation>
                          </gmd:specification>
                          <gmd:explanation>
                            <gco:CharacterString>Conformant to the cited specifications.
                            </gco:CharacterString>
                          </gmd:explanation>
                          <gmd:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </gmd:pass>
                        </gmd:DQ_ConformanceResult>
                      </gmd:result>
                    </gmd:DQ_DomainConsistency>
                  </gmd:report>
                </snippet>
              </template>
            </action>

          </section>

          <!-- CONFORMITY CLASS 2 -->
          <section name="inspire_sds_cc2">

            <section name="sds-section-crs">
              <field name="rsIdentifier"
                     xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                     del="../.." />

              <action type="add" name="referenceSystemInfo2" or="referenceSystemInfo"
                      in="/gmd:MD_Metadata"
                      if="count(gmd:MD_Metadata/gmd:referenceSystemInfo) = 0">
                <template>
                  <snippet>
                    <gmd:referenceSystemInfo>
                      <gmd:MD_ReferenceSystem>
                        <gmd:referenceSystemIdentifier>
                          <gmd:RS_Identifier>
                            <gmd:code>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:code>
                          </gmd:RS_Identifier>
                        </gmd:referenceSystemIdentifier>
                      </gmd:MD_ReferenceSystem>
                    </gmd:referenceSystemInfo>
                  </snippet>
                </template>
              </action>

              <!--<field name="rsIdentifier" templateModeOnly="false"
                  <field
                          xpath="gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier/gmd:code/gmx:Anchor"
                          del="."/>-->
                  <!-- The useXmlSnippet="true" attribute is a workaround to keep backward compatibility since often
                  the data-gn-crs-selector directive is used specifying a snippet as below although the developer wanted
                  to use the hardcoded snipped in EditorXMLService.js. We need a way to specify if we really want
                  to use the snippet below. The attribute is used in the template render-element-template-field located in form-builder.xsl-->
              <!--<action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                      useXmlSnippet="true"
                      or="referenceSystemInfo" in="/gmd:MD_Metadata">
                <template>
                  <snippet>
                    <gmd:referenceSystemInfo>
                      <gmd:MD_ReferenceSystem>
                        <gmd:referenceSystemIdentifier>
                          <gmd:RS_Identifier>
                            <gmd:code>
                              <gmx:Anchor xlink:href='http://www.opengis.net/def/crs/EPSG/0/{{code}}'
                                          xlink:title='{{description}}'>{{code}}
                              </gmx:Anchor>
                            </gmd:code>
                          </gmd:RS_Identifier>
                        </gmd:referenceSystemIdentifier>
                      </gmd:MD_ReferenceSystem>
                    </gmd:referenceSystemInfo>
                  </snippet>
                </template>
              </action>-->
            </section>

            <!-- 4.5.2 Ensure gmd:DQ_ConceptualConsistency mandatory elements for quality of service exists -->

            <section name="sds-section-qos">

              <action type="process"
                      process="sds-add-qualityofservice"
                      if="(count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])>0 and
                              (count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='availability'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='performance'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='capacity'])=0 ))"/>

              <field
                      xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency"/>

            </section>

            <!-- 4.5.3 TG13 Conditions applying to access and use -->

            <section name="accessConstraints">
              <!-- Use limitations -->
              <field
                name="useLimitation"
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation" />
              <action type="add" name="useLimitation" or="resourceConstraints" btnLabel="useLimitation"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_Constraints>
                        <gmd:useLimitation>
                          <gco:CharacterString/>
                        </gmd:useLimitation>
                      </gmd:MD_Constraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!--Limitations on public access. -->
              <!--<field name="limitationsPublicAccess"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]"
                     if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

              <field name="limitationsPublicAccess"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]]"
              />

              <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="limitationsPublicAccess"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces')]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations">no limitations to public access</gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- Conditions for access -->
              <!--<field name="conditionsForAccess"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]"
                     if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

              <field name="conditionsForAccess"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]]"
              />


              <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="conditionsForAccess"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[not(contains(gmx:Anchor/@xlink:href, 'LimitationsOnPublicAcces'))]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">conditions to access and use unknown</gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              <!-- Conditions for use -->
              <!--<field name="conditionsForUse"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints"
                     if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>-->

              <field name="conditionsForUse"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints]"
              />


              <action type="add" name="accessConstraints" or="resourceConstraints" btnLabel="conditionsForUse"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                  gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                            codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                            codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor xlink:href="http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">conditions to access and use unknown</gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section>
 <!--
            <section name="accessConstraints">

              &lt;!&ndash; fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it &ndash;&gt;
              <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              &lt;!&ndash; editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element &ndash;&gt;
              <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                      templateModeOnly="true"
                      notDisplayedIfMissing="true"
                      forceLabel="true"
                      name="sds-limitation"
                      del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              &lt;!&ndash; accessConstraints: ADD "no constraints" if element not defined &ndash;&gt;
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                                  xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              &lt;!&ndash; accessConstraints: ADD "unknown constraints" if element not defined &ndash;&gt;
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                                  xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              &lt;!&ndash; accessConstraints: ADD custom constraints if element not defined &ndash;&gt;

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:accessConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:accessConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> &lt;!&ndash; access constraints &ndash;&gt;

            <section name="useConstraints">

              &lt;!&ndash; fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it &ndash;&gt;
              <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

              &lt;!&ndash; editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element &ndash;&gt;
              <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                      templateModeOnly="true"
                      notDisplayedIfMissing="true"
                      forceLabel="true"
                      name="sds-limitation"
                      del=".">

                <template>
                  <values>
                    <key label="string"
                         xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                  </values>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gco:CharacterString>{{string}}</gco:CharacterString>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </field>

              &lt;!&ndash; useConstraints: ADD "no constraints" if element not defined &ndash;&gt;
              <action type="add"
                      name="sds-addNoConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints])"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">

                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints>
                          <gmx:Anchor
                                  xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                            No Conditions Apply
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

              &lt;!&ndash; useConstraints: ADD "unknown constraints" if element not defined &ndash;&gt;
              <action type="add"
                      name="sds-addUnknownConstraints"
                      forceLabel="true"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>

                        <gmd:otherConstraints>
                          <gmx:Anchor
                                  xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                            Conditions Unknown
                          </gmx:Anchor>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>


              &lt;!&ndash; useConstraints: ADD custom constraints if element not defined &ndash;&gt;

              <action type="add"
                      forceLabel="true"
                      name="sds-addConstraints"
                      or="resourceConstraints"
                      in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                      if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
                <template>
                  <snippet>
                    <gmd:resourceConstraints>
                      <gmd:MD_LegalConstraints>
                        <gmd:useConstraints>
                          <gmd:MD_RestrictionCode
                                  codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                  codeListValue="otherRestrictions"/>
                        </gmd:useConstraints>
                        <gmd:otherConstraints gco:nilReason="missing">
                          <gco:CharacterString/>
                        </gmd:otherConstraints>
                      </gmd:MD_LegalConstraints>
                    </gmd:resourceConstraints>
                  </snippet>
                </template>
              </action>

            </section> &lt;!&ndash; use constraints &ndash;&gt;

 -->

            <!-- Added from distributor from custodian role in update-fixed-info -->
            <!--<section name="sds-section-custodian">

              <field name="pointOfContact"
                     xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue='custodian']"
                     />


            </section>-->

          </section>

          <!-- CONFORMITY CLASS 3 -->

          <section name="inspire_sds_cc3">

            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"/>

            <action type="add"
                    forceLabel="true"
                    name="sds-addOperation"
                    or="containsOperations"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
              <template>
                <snippet>
                  <srv:containsOperations>
                    <srv:SV_OperationMetadata>
                      <srv:operationName>
                        <gco:CharacterString></gco:CharacterString>
                      </srv:operationName>
                      <srv:DCP>
                        <srv:DCPList
                                codeList="http://inspire.ec.europa.eu/metadata-codelist/DCPList"
                                codeListValue="webServices">Web services
                        </srv:DCPList>
                      </srv:DCP>
                      <srv:connectPoint>
                        <gmd:CI_OnlineResource>
                          <gmd:linkage>
                            <gmd:URL>http://</gmd:URL>
                          </gmd:linkage>
                        </gmd:CI_OnlineResource>
                      </srv:connectPoint>
                    </srv:SV_OperationMetadata>
                  </srv:containsOperations>
                </snippet>
              </template>
            </action>

          </section>

        </section>
      </tab>

      <thesaurusList>
        <thesaurus key="external.theme.Initiativ"
                   widgetMode="checkboxes" />
      </thesaurusList>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="srv:containsOperations"/>
        <for name="srv:SV_OperationMetadata"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>
    </view>


    <!--Turn off INSPIRE view by default -->
    <view name="inspire" upAndDownControlHidden="true" disabled="true">
      <tab id="inspire" default="true" mode="flat">
        <section name="resource">
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"/>
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:abstract"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:abstract"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <action type="add"
                  if="count(gmd:MD_Metadata/gmd:hierarchyLevel) = 0"
                  name="hierarchyLevel" or="hierarchyLevel"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:hierarchyLevel>
                  <gmd:MD_ScopeCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                          codeListValue="dataset"/>
                </gmd:hierarchyLevel>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"/>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords
            [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString = 'INSPIRE Service taxonomy']"></field>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->


          <field name="url" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions
            /gmd:MD_DigitalTransferOptions/gmd:onLine/gmd:CI_OnlineResource/gmd:linkage"
                 del="../..">
            <template>
              <values>
                <key label="url" xpath="gmd:URL" tooltip="gmd:linkage"/>
              </values>
              <snippet>
                <gmd:linkage>
                  <gmd:URL>{{url}}</gmd:URL>
                </gmd:linkage>
              </snippet>
            </template>
          </field>

          <action type="add" name="url" or="onLine"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions">
            <template>
              <snippet>
                <gmd:onLine>
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL/>
                    </gmd:linkage>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </action>

          <!-- Resource identifier for dataset, service
          and add action to compute it if not defined. -->
          <field name="identifier" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>
          <field name="identifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:MD_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:code|gmd:MD_Identifier"/>
              </values>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </field>

          <action type="add" name="identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>

          <action type="process" process="add-resource-id"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/
            gmd:identifier[ends-with(gmd:MD_Identifier/gmd:code/gco:CharacterString, //gmd:MD_Metadata/gmd:fileIdentifier/gco:CharacterString)]) = 0"/>


          <field name="encoding" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributionFormat"
                 del=".">
            <template>
              <values>
                <key label="format"
                     xpath="gmd:MD_Format/gmd:name/gco:CharacterString"
                     tooltip="gmd:name|gmd:MD_Format">
                  <helper name="gmd:name" context="gmd:MD_Format"/>
                </key>
                <key label="format_version" xpath="gmd:MD_Format/gmd:version/gco:CharacterString"/>
              </values>
              <snippet>
                <gmd:distributionFormat>
                  <gmd:MD_Format>
                    <gmd:name>
                      <gco:CharacterString>{{format}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:name>
                    <gmd:version>
                      <gco:CharacterString>{{format_version}}</gco:CharacterString>
                    </gmd:version>
                    <gn:copy select="gmd:amendmentNumber"/>
                    <gn:copy select="gmd:specification"/>
                    <gn:copy select="gmd:fileDecompressionTechnique"/>
                    <gn:copy select="gmd:formatDistributor"/>
                  </gmd:MD_Format>
                </gmd:distributionFormat>
              </snippet>
            </template>
          </field>

          <action type="add" name="encoding" or="distributionFormat"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributionFormat>
                  <gmd:MD_Format>
                    <gmd:name>
                      <gco:CharacterString>GML</gco:CharacterString>
                    </gmd:name>
                    <gmd:version>
                      <gco:CharacterString>3.2.1</gco:CharacterString>
                    </gmd:version>
                  </gmd:MD_Format>
                </gmd:distributionFormat>
              </snippet>
            </template>
          </action>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[gmd:type/gmd:MD_KeywordTypeCode/@codeListValue='theme'
            and not(gmd:thesaurusName)]/gmd:keyword"
                  or="keyword"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[gmd:type/gmd:MD_KeywordTypeCode/@codeListValue='theme'
            and not(gmd:thesaurusName)]"/>

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword[not(../gmd:thesaurusName)]"
                  or="keyword"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:descriptiveKeywords/gmd:MD_Keywords[not(gmd:thesaurusName)]"/>

          <!-- INSPIRE Themes -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
            gmd:descriptiveKeywords
            [contains(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString, 'INSPIRE themes')]"/>
          <!-- FIXME: MUST be provided in template and thesaurus available in the catalog, to be displayed properly -->
          <action type="add"
                  name="inspireTheme"
                  or="descriptiveKeywords"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/
                        gmd:descriptiveKeywords[
                          contains(gmd:MD_Keywords/gmd:thesaurusName/
                                      gmd:CI_Citation/gmd:title/gco:CharacterString,
                                   'INSPIRE themes')]) = 0">
            <template>
              <snippet>
                <gmd:descriptiveKeywords>
                  <gmd:MD_Keywords>
                    <gmd:keyword>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:keyword>
                    <gmd:type>
                      <gmd:MD_KeywordTypeCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                              codeListValue="theme"/>
                    </gmd:type>
                    <gmd:thesaurusName>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>GEMET - INSPIRE themes, version 1.0
                          </gco:CharacterString>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>2008-06-01</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                      codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gmd:identifier>
                          <gmd:MD_Identifier>
                            <gmd:code>
                              <gmx:Anchor
                                      xlink:href="http://localhost:8080/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">
                                geonetwork.thesaurus.external.theme.inspire-theme
                              </gmx:Anchor>
                            </gmd:code>
                          </gmd:MD_Identifier>
                        </gmd:identifier>
                      </gmd:CI_Citation>
                    </gmd:thesaurusName>
                  </gmd:MD_Keywords>
                </gmd:descriptiveKeywords>
              </snippet>
            </template>
          </action>

          <section name="bboxesSection">
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
              srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
              gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
          </section>

          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </gmd:extent>
              </snippet>
            </template>
          </action>

          <action type="add" name="extent" or="extent"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
            <template>
              <snippet>
                <srv:extent>
                  <gmd:EX_Extent>
                    <gmd:geographicElement>
                      <gmd:EX_GeographicBoundingBox>
                        <gmd:westBoundLongitude>
                          <gco:Decimal/>
                        </gmd:westBoundLongitude>
                        <gmd:eastBoundLongitude>
                          <gco:Decimal/>
                        </gmd:eastBoundLongitude>
                        <gmd:southBoundLatitude>
                          <gco:Decimal/>
                        </gmd:southBoundLatitude>
                        <gmd:northBoundLatitude>
                          <gco:Decimal/>
                        </gmd:northBoundLatitude>
                      </gmd:EX_GeographicBoundingBox>
                    </gmd:geographicElement>
                  </gmd:EX_Extent>
                </srv:extent>
              </snippet>
            </template>
          </action>

          <field name="rsIdentifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>
                <!-- TODO: Get the helper -->
              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gn:copy select="gmd:version"/>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>


          <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>


          <section name="referenceDate">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/
              gmd:date"/>
            <action type="add" name="referenceDate" or="date"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation">
              <template>
                <snippet>
                  <gmd:date>
                    <gmd:CI_Date>
                      <gmd:date>
                        <gco:Date></gco:Date>
                      </gmd:date>
                      <gmd:dateType>
                        <gmd:CI_DateTypeCode
                                codeList="http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode"
                                codeListValue="revision"/>
                      </gmd:dateType>
                    </gmd:CI_Date>
                  </gmd:date>
                </snippet>
              </template>
            </action>
          </section>


          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                  <directiveAttributes data-tag-name="gml:beginPosition" data-hide-time="true"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"
                >
                  <directiveAttributes
                          data-tag-name="gml:endPosition" data-hide-time="true"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - dataset -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="temporalRangeSection" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <values>
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"/>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"
                />
                <key label="indeterminatePosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition/@indeterminatePosition"
                     use="codelist"/>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        <gml:beginPosition>{{beginPosition}}</gml:beginPosition>
                        <gml:endPosition indeterminatePosition="{{indeterminatePosition}}">
                          {{endPosition}}
                        </gml:endPosition>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>

          <!-- Add Temporal extent - service -->
           <action type="add"
            name="temporalRangeSection" or="temporalElement"
                   forceLabel="true"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:extent/gmd:EX_Extent"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                       <gml:beginPosition/>
                       <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

          <field name="lineage"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

          <action type="add" name="lineage" or="statement"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
            <template>
              <snippet>
                <gmd:statement>
                  <gco:CharacterString></gco:CharacterString>
                </gmd:statement>
              </snippet>
            </template>
          </action>
          <action type="add" name="lineage" or="lineage"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:lineage>
                  <gmd:LI_Lineage>
                    <gmd:statement>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:statement>
                  </gmd:LI_Lineage>
                </gmd:lineage>
              </snippet>
            </template>
          </action>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/
                    */gmd:spatialResolution/
                      */gmd:equivalentScale/*/gmd:denominator"
                 del="../../../.."/>


          <!--
          if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'vector']) = 1"
          -->
          <action type="add" btnLabel="spatialResolution" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:equivalentScale>
                      <gmd:MD_RepresentativeFraction>
                        <gmd:denominator>
                          <gco:Integer/>
                        </gmd:denominator>
                      </gmd:MD_RepresentativeFraction>
                    </gmd:equivalentScale>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/
                    */gmd:spatialResolution/*/gmd:distance"
                 del="../.."/>


          <!--
          if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'grid']) = 1"
          -->
          <action type="add" btnLabel="spatialDistance" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:distance>
                      <gco:Distance uom="m"/>
                    </gmd:distance>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>


          <field name="conformity" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/
                    gmd:report/gmd:DQ_DomainConsistency/gmd:result"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification)=0"
                 del="../..">
            <template>
              <values>
                <key label="conformity_title"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString"
                     tooltip="gmd:pass">
                  <helper name="gmd:title"
                          context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_date"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"
                     use="date"/>
                <key label="explanation"
                     xpath="gmd:DQ_ConformanceResult/
                          gmd:explanation/gco:CharacterString"
                     use="textarea"/>
                <key label="pass"
                     xpath="gmd:DQ_ConformanceResult/gmd:pass/gco:Boolean"
					 tooltip="gmd:pass"
                     use="gn-checkbox-with-nilreason">
                  <directiveAttributes
                          data-tag-name="gmd:pass"
                          data-nilreason="eval#gmd:DQ_ConformanceResult/gmd:pass/@gco:nilReason"
                          data-labels='{"true": "conformant", "false": "notConformant", "unknown": "notEvaluated"}'/>
                </key>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gco:CharacterString>{{conformity_title}}</gco:CharacterString>
                          <gn:copy select="gmd:PT_FreeText"/>
                        </gmd:title>
                        <gn:copy select="gmd:alternateTitle"/>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>{{conformity_date}}</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                      codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                        <gn:copy select="gmd:edition"/>
                        <gn:copy select="gmd:editionDate"/>
                        <gn:copy select="gmd:identifier"/>
                        <gn:copy select="gmd:citedResponsibleParty"/>
                        <gn:copy select="gmd:presentationForm"/>
                        <gn:copy select="gmd:series"/>
                        <gn:copy select="gmd:otherCitationDetails"/>
                        <gn:copy select="gmd:collectiveTitle"/>
                        <gn:copy select="gmd:ISBN"/>
                        <gn:copy select="gmd:ISSN"/>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:explanation>
                    {{pass}}
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>


          <action type="add" name="conformity" or="report" tooltip="gmd:result"
                  forceLabel="true"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification)=0"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString/>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date/>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                          codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString/>
                        </gmd:explanation>
                        <gmd:pass gco:nilReason="unknown">
                          <gco:Boolean/>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>


          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>

          <field
                  name="useLimitation"
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
          <action type="add" name="useLimitation" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_Constraints>
                    <gmd:useLimitation>
                      <gco:CharacterString/>
                    </gmd:useLimitation>
                  </gmd:MD_Constraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>


          <!-- Access constraints for metadata about data.
               Services have their own format, defined in the SDS tab -->
          <field name="accessConstraints"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
            gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

          <action type="add" name="accessConstraints" or="resourceConstraints"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <snippet>
                <gmd:resourceConstraints>
                  <gmd:MD_LegalConstraints>
                    <gmd:accessConstraints>
                      <gmd:MD_RestrictionCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                              codeListValue="otherRestrictions"/>
                    </gmd:accessConstraints>
                    <gmd:useConstraints/>
                    <gmd:otherConstraints gco:nilReason="missing">
                      <gco:CharacterString/>
                    </gmd:otherConstraints>
                  </gmd:MD_LegalConstraints>
                </gmd:resourceConstraints>
              </snippet>
            </template>
          </action>


          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:characterSet"></field>


          <field name="pointOfContact" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact"
                 del="."
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                    gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="role"
                     xpath="gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue">
                  <codelist name="gmd:CI_RoleCode"/>
                </key>
              </values>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty>
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <gn:copy select="gmd:country"/>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                              <gn:copy select="gmd:PT_FreeText"/>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                              codeListValue="{{role}}"/>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </field>


          <action type="add" name="pointOfContact" addDirective="data-gn-directory-entry-selector"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <directiveAttributes
                    data-template-add-action="true"
                    data-template-type="contact"
                    data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
          </action>

        </section>

        <section name="metadata">

          <field name="metadataPointOfContact" templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:contact" del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="role"
                     xpath="gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue">
                  <codelist name="gmd:CI_RoleCode"/>
                </key>
              </values>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty>
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                      <gn:copy select="gmd:PT_FreeText"/>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <gn:copy select="gmd:country"/>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                              <gn:copy select="gmd:PT_FreeText"/>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode
                              codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                              codeListValue="{{role}}"/>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </field>

          <action type="add" name="metadataPointOfContact"
                  addDirective="data-gn-directory-entry-selector" or="contact"
                  in="/gmd:MD_Metadata">
            <directiveAttributes
                    data-template-add-action="true"
                    data-template-type="contact"
                    data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
          </action>


          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
        </section>
      </tab>

      <tab id="inspire_sds"
           mode="flat"
           displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

        <section name="inspire_sds_cc1">

          <!-- 4.4.1 TG4 : ensure gmd:DQ_DataQuality for service exists -->
          <action type="process"
                  process="sds-add-dataquality"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])=0"/>

          <!-- 4.4.1 rec 1 : replace CharacterString with Anchor-->
          <action type="process"
                  process="sds-fix-category"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)>0"/>

          <!-- 4.4.1 category -->
          <field name="sds-category"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>

          <!-- 4.4.1 pass -->
          <field
                  xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:pass"/>

          <action type="add"
                  name="inspire_add_pass"
                  forceLabel="true"
                  or="pass"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult">
            <template>
              <snippet>
                <gmd:pass>
                  <gco:Boolean>true</gco:Boolean>
                </gmd:pass>
              </snippet>
            </template>
          </action>


          <!-- 4.4.2 Resource locator -->
          <!-- 4.4.2 Function -->
          <!-- *** accessPoint *** -->

          <field name="sds-accesspoint"
                 templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'accessPoint']"

                 del=".">
            <template>
              <values>
                <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
              </values>
              <snippet>
                <gmd:onLine>
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL>{{linkage}}</gmd:URL>
                    </gmd:linkage>
                    <gmd:description>
                      <gmx:Anchor
                              xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                        accessPoint
                      </gmx:Anchor>
                    </gmd:description>
                    <gmd:function>
                      <gmd:CI_OnLineFunctionCode
                              codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                              codeListValue="information">
                      </gmd:CI_OnLineFunctionCode>
                    </gmd:function>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sds-add-accesspoint"
                  forceLabel="true"
                  or="onLine"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
            <template>
              <snippet>
                <gmd:onLine>
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL>http://accesspoint.url</gmd:URL>
                    </gmd:linkage>
                    <gmd:description>
                      <gmx:Anchor
                              xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/accessPoint">
                        accessPoint
                      </gmx:Anchor>
                    </gmd:description>
                    <gmd:function>
                      <gmd:CI_OnLineFunctionCode
                              codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                              codeListValue="information"></gmd:CI_OnLineFunctionCode>
                    </gmd:function>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </action>

          <!-- 4.4.2 Resource locator -->
          <!-- 4.4.2 Function -->
          <!-- *** endPoint *** -->

          <field name="sds-endpoint"
                 templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[gmd:CI_OnlineResource/gmd:description/gmx:Anchor/text() = 'endPoint']"
                 notDisplayedIfMissing="true"
                 del=".">
            <template>
              <values>
                <key label="linkage" xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
              </values>
              <snippet>
                <gmd:onLine>
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL>{{linkage}}</gmd:URL>
                    </gmd:linkage>
                    <gmd:description>
                      <gmx:Anchor
                              xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                        endPoint
                      </gmx:Anchor>
                    </gmd:description>
                    <gmd:function>
                      <gmd:CI_OnLineFunctionCode
                              codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                              codeListValue="information">
                      </gmd:CI_OnLineFunctionCode>
                    </gmd:function>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sds-add-endpoint"
                  forceLabel="true"
                  or="onLine"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution//gmd:transferOptions/gmd:MD_DigitalTransferOptions">
            <template>
              <snippet>
                <gmd:onLine>
                  <gmd:CI_OnlineResource>
                    <gmd:linkage>
                      <gmd:URL>http://endpoint.url</gmd:URL>
                    </gmd:linkage>
                    <gmd:description>
                      <gmx:Anchor
                              xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ResourceLocatorDescription/endPoint">
                        endPoint
                      </gmx:Anchor>
                    </gmd:description>
                    <gmd:function>
                      <gmd:CI_OnLineFunctionCode
                              codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_OnLineFunctionCode"
                              codeListValue="information"></gmd:CI_OnLineFunctionCode>
                    </gmd:function>
                  </gmd:CI_OnlineResource>
                </gmd:onLine>
              </snippet>
            </template>
          </action>


          <!-- 4.4.3 TG8: edit Technical specification -->

          <field
                  templateModeOnly="true"
                  notDisplayedIfMissing="true"
                  forceLabel="true"
                  name="sds-tech-spec"
                  del="../.."
                  xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_FormatConsistency/gmd:result">
            <template>
              <values>
                <key label="conformity_linkage"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href"/>
                <key label="conformity_desc"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gmx:Anchor/text()"
                     tooltip="gmd:pass">
                  <helper name="gmd:title"
                          context="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_FormatConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title"/>
                </key>
                <key label="conformity_date" use="gn-date-picker"
                     xpath="gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date"/>
                <key label="explanation" use="text"
                     xpath="gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString"/>
              </values>
              <snippet>
                <gmd:result>
                  <gmd:DQ_ConformanceResult>
                    <gmd:specification>
                      <gmd:CI_Citation>
                        <gmd:title>
                          <gmx:Anchor xlink:href="{{conformity_linkage}}">{{conformity_desc}}
                          </gmx:Anchor>
                        </gmd:title>
                        <gmd:date>
                          <gmd:CI_Date>
                            <gmd:date>
                              <gco:Date>{{conformity_date}}</gco:Date>
                            </gmd:date>
                            <gmd:dateType>
                              <gmd:CI_DateTypeCode
                                      codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                      codeListValue="publication"/>
                            </gmd:dateType>
                          </gmd:CI_Date>
                        </gmd:date>
                      </gmd:CI_Citation>
                    </gmd:specification>
                    <gmd:explanation>
                      <gco:CharacterString>{{explanation}}</gco:CharacterString>
                    </gmd:explanation>
                    <gmd:pass>
                      <gco:Boolean>true</gco:Boolean>
                    </gmd:pass>
                  </gmd:DQ_ConformanceResult>
                </gmd:result>
              </snippet>
            </template>
          </field>

          <!-- 4.4.3 TG8: add Technical specification entry -->

          <action type="add"
                  name="sds-add-tech-spec"
                  forceLabel="true"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']">

            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_FormatConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gmx:Anchor xlink:href=" http://link,to/the.technical.specification">
                                Description of technical specification
                              </gmx:Anchor>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2014-12-11</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode
                                          codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode"
                                          codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conformant to the cited specifications.
                          </gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_FormatConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>

        </section>

        <!-- CONFORMITY CLASS 2 -->
        <section name="inspire_sds_cc2">

          <section name="sds-section-crs">
            <field
                    xpath="gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier/gmd:code/gmx:Anchor"
                    del="."/>
            <!-- The useXmlSnippet="true" attribute is a workaround to keep backward compatibility since often
            the data-gn-crs-selector directive is used specifying a snippet as below although the developer wanted
            to use the hardcoded snipped in EditorXMLService.js. We need a way to specify if we really want
            to use the snippet below. The attribute is used in the template render-element-template-field located in form-builder.xsl-->
            <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                    useXmlSnippet="true"
                    or="referenceSystemInfo" in="/gmd:MD_Metadata">
              <template>
                <snippet>
                  <gmd:referenceSystemInfo>
                    <gmd:MD_ReferenceSystem>
                      <gmd:referenceSystemIdentifier>
                        <gmd:RS_Identifier>
                          <gmd:code>
                            <gmx:Anchor xlink:href='http://www.opengis.net/def/crs/EPSG/0/{{code}}'
                                        xlink:title='{{description}}'>{{code}}
                            </gmx:Anchor>
                          </gmd:code>
                        </gmd:RS_Identifier>
                      </gmd:referenceSystemIdentifier>
                    </gmd:MD_ReferenceSystem>
                  </gmd:referenceSystemInfo>
                </snippet>
              </template>
            </action>
          </section>

          <!-- 4.5.2 Ensure gmd:DQ_ConceptualConsistency mandatory elements for quality of service exists -->

          <section name="sds-section-qos">

            <action type="process"
                    process="sds-add-qualityofservice"
                    if="(count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service'])>0 and
                              (count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='availability'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='performance'])=0 or
                               count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality[gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue='service']/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure/gmx:Anchor[text()='capacity'])=0 ))"/>

            <field
                    xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency"/>

          </section>

          <!-- 4.5.3 TG13 Conditions applying to access and use -->

          <section name="accessConstraints">

            <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

            <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:accessConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                    templateModeOnly="true"
                    notDisplayedIfMissing="true"
                    forceLabel="true"
                    name="sds-limitation"
                    del=".">

              <template>
                <values>
                  <key label="string"
                       xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                </values>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:accessConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:accessConstraints>
                      <gmd:otherConstraints>
                        <gco:CharacterString>{{string}}</gco:CharacterString>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </field>

            <!-- accessConstraints: ADD "no constraints" if element not defined -->
            <action type="add"
                    name="sds-addNoConstraints"
                    forceLabel="true"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints])"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">

              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:accessConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:accessConstraints>
                      <gmd:otherConstraints>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                          No Conditions Apply
                        </gmx:Anchor>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>

            <!-- accessConstraints: ADD "unknown constraints" if element not defined -->
            <action type="add"
                    name="sds-addUnknownConstraints"
                    forceLabel="true"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:accessConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:accessConstraints>
                      <gmd:otherConstraints>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                          Conditions Unknown
                        </gmx:Anchor>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>


            <!-- accessConstraints: ADD custom constraints if element not defined -->

            <action type="add"
                    forceLabel="true"
                    name="sds-addConstraints"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:accessConstraints]) = 0">
              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:accessConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:accessConstraints>
                      <gmd:otherConstraints gco:nilReason="missing">
                        <gco:CharacterString/>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>

          </section> <!-- access constraints -->

          <section name="useConstraints">

            <!-- fixed values, user should only be able to remove the whole gmd:resourceConstraints element, and not edit it -->
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints/gmx:Anchor]"/>

            <!-- editable value, user should be able to edit the characterstring element, or to remove the whole gmd:resourceConstraints element -->
            <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints[gmd:MD_LegalConstraints[gmd:useConstraints]/gmd:otherConstraints[gco:CharacterString]]"
                    templateModeOnly="true"
                    notDisplayedIfMissing="true"
                    forceLabel="true"
                    name="sds-limitation"
                    del=".">

              <template>
                <values>
                  <key label="string"
                       xpath="gmd:MD_LegalConstraints/gmd:otherConstraints/gco:CharacterString"/>
                </values>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:useConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:useConstraints>
                      <gmd:otherConstraints>
                        <gco:CharacterString>{{string}}</gco:CharacterString>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </field>

            <!-- useConstraints: ADD "no constraints" if element not defined -->
            <action type="add"
                    name="sds-addNoConstraints"
                    forceLabel="true"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    check="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints])"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">

              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:useConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:useConstraints>
                      <gmd:otherConstraints>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply">
                          No Conditions Apply
                        </gmx:Anchor>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>

            <!-- useConstraints: ADD "unknown constraints" if element not defined -->
            <action type="add"
                    name="sds-addUnknownConstraints"
                    forceLabel="true"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:useConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:useConstraints>

                      <gmd:otherConstraints>
                        <gmx:Anchor
                                xlink:href="http://inspire.ec.europa.eu/registry/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown">
                          Conditions Unknown
                        </gmx:Anchor>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>


            <!-- useConstraints: ADD custom constraints if element not defined -->

            <action type="add"
                    forceLabel="true"
                    name="sds-addConstraints"
                    or="resourceConstraints"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                    if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints[gmd:useConstraints]) = 0">
              <template>
                <snippet>
                  <gmd:resourceConstraints>
                    <gmd:MD_LegalConstraints>
                      <gmd:useConstraints>
                        <gmd:MD_RestrictionCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_RestrictionCode"
                                codeListValue="otherRestrictions"/>
                      </gmd:useConstraints>
                      <gmd:otherConstraints gco:nilReason="missing">
                        <gco:CharacterString/>
                      </gmd:otherConstraints>
                    </gmd:MD_LegalConstraints>
                  </gmd:resourceConstraints>
                </snippet>
              </template>
            </action>

          </section> <!-- use constraints -->

          <section name="sds-section-custodian">

            <field name="pointOfContact"
                   templateModeOnly="true"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue='custodian']"
                   del=".">

              <template>
                <values readonlyIf="count(@xlink:href) > 0">
                  <key label="organisationName"
                       xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                  <key label="electronicMailAddress"
                       xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                       use="email"/>
                </values>
                <snippet>
                  <gmd:pointOfContact>
                    <gmd:CI_ResponsibleParty>
                      <gn:copy select="gmd:individualName"/>
                      <gmd:organisationName>
                        <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                        <gn:copy select="gmd:PT_FreeText"/>
                      </gmd:organisationName>
                      <gn:copy select="gmd:positionName"/>
                      <gmd:contactInfo>
                        <gmd:CI_Contact>
                          <gn:copy select="gmd:phone"/>
                          <gmd:address>
                            <gmd:CI_Address>
                              <gn:copy select="gmd:deliveryPoint"/>
                              <gn:copy select="gmd:city"/>
                              <gn:copy select="gmd:administrativeArea"/>
                              <gn:copy select="gmd:postalCode"/>
                              <gn:copy select="gmd:country"/>
                              <gmd:electronicMailAddress>
                                <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                                <gn:copy select="gmd:PT_FreeText"/>
                              </gmd:electronicMailAddress>
                            </gmd:CI_Address>
                          </gmd:address>
                          <gn:copy select="gmd:onlineResource"/>
                          <gn:copy select="gmd:hoursOfService"/>
                          <gn:copy select="gmd:contactInstructions"/>
                        </gmd:CI_Contact>
                      </gmd:contactInfo>
                      <gmd:role>
                        <gmd:CI_RoleCode
                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                                codeListValue="custodian"/>
                      </gmd:role>
                    </gmd:CI_ResponsibleParty>
                  </gmd:pointOfContact>
                </snippet>
              </template>
            </field>


            <action type="add" name="pointOfContact"
                    addDirective="data-gn-directory-entry-selector"
                    or="pointOfContact"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
              <directiveAttributes
                      data-template-add-action="true"
                      data-template-type="contact"
                      data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
            </action>
          </section>

        </section>

        <!-- CONFORMITY CLASS 3 -->

        <section name="inspire_sds_cc3">

          <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"/>

          <action type="add"
                  forceLabel="true"
                  name="sds-addOperation"
                  or="containsOperations"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <template>
              <snippet>
                <srv:containsOperations>
                  <srv:SV_OperationMetadata>
                    <srv:operationName>
                      <gco:CharacterString></gco:CharacterString>
                    </srv:operationName>
                    <srv:DCP>
                      <srv:DCPList
                              codeList="http://inspire.ec.europa.eu/metadata-codelist/DCPList"
                              codeListValue="webServices">Web services
                      </srv:DCPList>
                    </srv:DCP>
                    <srv:connectPoint>
                      <gmd:CI_OnlineResource>
                        <gmd:linkage>
                          <gmd:URL>http://</gmd:URL>
                        </gmd:linkage>
                      </gmd:CI_OnlineResource>
                    </srv:connectPoint>
                  </srv:SV_OperationMetadata>
                </srv:containsOperations>
              </snippet>
            </template>
          </action>

        </section>
      </tab>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="srv:containsOperations"/>
        <for name="srv:SV_OperationMetadata"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>

    </view>

    <view name="advanced"  disabled="true">
      <tab id="identificationInfo" default="true">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="distributionInfo">
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="dataQualityInfo">
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="spatialRepresentationInfo">
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"
                 or="spatialRepresentationInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="referenceSystemInfo">
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="contentInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:contentInfo" or="contentInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="portrayalCatalogueInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadata">
        <section name="metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>
      <tab id="metadataConstraints" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataConstraints" or="metadataConstraints"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadataMaintenance" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataMaintenance" or="metadataMaintenance"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="applicationSchemaInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:applicationSchemaInfo" or="applicationSchemaInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
    </view>
    <view name="full-view-swe">
      <tab id="introduction">
        <section>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:status"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:topicCategory"/>
		  <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"/>
		  <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date"/>
		  <field xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor/gmd:MD_Distributor/gmd:distributorTransferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine"/>
        </section>
      </tab>

      <tab id="metadata2">
        <section>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>

      <tab id="understandResource" default="true">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                 in="/gmd:MD_Metadata"/>
		<section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="distributionInfo">
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="dataQualityInfo">
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <!-- <tab id="spatialRepresentationInfo">
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"
                 or="spatialRepresentationInfo" in="/gmd:MD_Metadata"/>
      </tab> -->
      <!-- <tab id="referenceSystemInfo">
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
      </tab> -->
	  <tab id="restriktionerInfo">
        <section>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_Constraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_Constraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"/>
		</section>
      </tab>
      <!--
	  <tab id="contentInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:contentInfo" or="contentInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="portrayalCatalogueInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>

      <tab id="metadataConstraints" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataConstraints" or="metadataConstraints"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadataMaintenance" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataMaintenance" or="metadataMaintenance"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="applicationSchemaInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:applicationSchemaInfo" or="applicationSchemaInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
		-->
      <tab id="allMetadata">
		<!-- INFORMATION OM DATA - Start -->
		<section name="understandResource" xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                 in="/gmd:MD_Metadata"/>
		<section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
		<!-- INFORMATION ON DATA - End -->

		<!-- DISTRIBUTION - Start -->
		<section name="distributionInfo" xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                 in="/gmd:MD_Metadata"/>
		<!-- DISTRIBUTION - End -->

		<!-- KVALITET - Start -->
		<section name="dataQualityInfo" xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                 in="/gmd:MD_Metadata"/>
		<!-- KVALITET - End -->

		<!-- RESTRIKTIONER - Start -->
		<section name="restriktionerInfo">
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_Constraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_Constraints"/>
			<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"/>
		</section>
		<!-- RESTRIKTIONER - End -->

		<!-- INFORMATION OM METADATA - Start -->
		<section name="metadata2">
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
		<!-- INFORMATION OM METADATA - End -->
      </tab>
    </view>
    <view name="xml">
      <tab id="xml" default="true"/>
    </view>
  </views>

  <batchEditing>
    <section name="identification">
      <!-- Update existing title in metadata record -->
      <field name="title"
             xpath="gmd:identificationInfo/*/
                      gmd:citation/gmd:CI_Citation/gmd:title"
             indexField="title">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new keyword in the first gmd:descriptiveKeywords found.
      Warning: The section may contains a thesaurusName reference and
      the keyword may not be part of it.
      Warning: Duplicates may be inserted.
      -->
      <field name="keyword"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/
                      gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword"
             indexField="keyword"
             insertMode="gn_create">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new topic category
      Warning: Duplicates may be inserted.
      -->
      <field name="topicCats"
             xpath="gmd:identificationInfo/*/
                      gmd:topicCategory"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_TopicCategoryCode"
             indexField="topicCat"
             insertMode="gn_create">
        <template><![CDATA[<gmd:MD_TopicCategoryCode xmlns:gmd='http://www.isotc211.org/2005/gmd'>{{value}}</gmd:MD_TopicCategoryCode>]]></template>
      </field>

      <!-- Insert a new extent
      Warning: Duplicates may be inserted.
      -->
      <field name="extent"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent"
             use="data-gn-draw-bbox"
             insertMode="gn_create"/>

      <!-- Insert a new resource language
      Warning: Duplicates may be inserted.
      -->
      <field name="language"
             xpath="gmd:identificationInfo/*/
                      gmd:language"
             use="data-gn-language-picker"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert, or replace if existing, the parent identifier.
      Warning: Duplicates may be inserted.
      -->
      <field name="parentIdentifier"
             xpath="gmd:parentIdentifier"
             use="data-gn-metadata-picker"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <field name="resourceStatus"
             xpath="gmd:identificationInfo/*/
                      gmd:status"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_ProgressCode"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gmd:MD_ProgressCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>

    <section name="resourceConstraints">
      <!-- Insert a new access contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="legalConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:accessConstraints"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_RestrictionCode"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<gmd:MD_RestrictionCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert a new other contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="otherConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:otherConstraints"
             use="textarea"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>


    <!-- Replace current lineage or insert a new one.
          Warning: Duplicates may be inserted.
    -->
    <section name="quality">
      <field name="lineage"
             xpath="gmd:dataQualityInfo/gmd:DQ_DataQuality/
                      gmd:lineage/gmd:LI_Lineage/gmd:statement"
             use="textarea"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>

    <section name="contact">
      <field name="resourceContact"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="distributor"
             xpath="gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor/gmd:MD_Distributor/gmd:distributorContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="mdContact"
             xpath="gmd:contact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
    </section>

    <section name="metadata">
      <field name="mdLanguage"
             xpath="gmd:language"
             use="data-gn-language-picker"
             removable="true">
        <template><![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>
  </batchEditing>
</editor>
